{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///gamee-js.min.js","webpack:///webpack/bootstrap e3344513ac420d153d79?1c4f","webpack:///./gamee/libs/shims.js?26b9","webpack:///./gamee/src/core.js?6b70","webpack:///./gamee/src/gameeAPI.js?7205","webpack:///./gamee/src/platform_bridge.js?848f","webpack:///./gamee/libs/bullet.js?d693","webpack:///./gamee/src/game_controllers.js?1af2","webpack:///./gamee/src/index.js?b323","webpack:///(webpack)/buildin/global.js?3698"],"names":["root","factory","exports","module","define","amd","a","i","this","modules","__webpack_require__","moduleId","installedModules","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","CustomEmitter","delegate","method","eventTarget","bind","document","createDocumentFragment","forEach","wrapKeyEvent","fn","ev","keyCode","window","event","which","ce","CustomEvent","preventDefault","defaultPrevented","Error","e","params","evt","origPrevent","bubbles","cancelable","detail","undefined","createEvent","initCustomEvent","Event","win","doc","docHijack","old","v","addListen","addEvent","on","self","attachEvent","returnValue","stopPropagation","cancelBubble","obj","length","addEventListener","Element","all","global","validateDataType","DataTypeException","core","_typeof","Symbol","iterator","constructor","_game_controllers","controllers","newObj","key","default","_shims","overloadedAudioContext","type","ctx","state","resume","test","navigator","userAgent","buffer","createBuffer","dummy","createBufferSource","connect","destination","start","disconnect","setTimeout","body","removeEventListener","join","AudioContext","webkitAudioContext","createController","opts","btn","controller","controllerTypes","enableKeyboard","buttons","remapButton","noop","cache","internals","VERSION","CAPABILITIES","variant","soundUnlocked","onReady","onGameStart","gameeInit","ctrlType","ctrlOpts","capabilities","cb","allOk","arguments","cap","Array","isArray","indexOf","native","createRequest","version","responseData","error","platform","requestController","_bindKeyboardTriggers","err","data","trigger","button","gameLoadingProgress","percentageSoFar","percentage","gameReady","updateScore","score","opt_ghostSign","parseInt","ghostSign","gameOver","opt_replayData","opt_saveState","opt_hideOverlay","requestData","replayData","hideOverlay","gameSave","share","saveState","requestSocial","numberOfPlayers","socialData","logEvent","eventName","eventValue","logEvents","requestBattleData","requestPlayerReplay","userID","replay","requestPlayerSaveState","playerEnteredToGameRoom","playerLeftGameRoom","purchaseItemWithCoins","options","oldMethod","coins","isSilentModeEnabled","purchaseItemWithGems","gems","loadRewardedVideo","rewardedAds","showRewardedVideo","showSubscribeDialog","requestPlayerData","playerData","startSignal","ghostMode","mainController","additionalController","gameeNative","apply","_keydown","_keyup","OneButton","OneButtonController","TwoButtons","TwoButtonController","FourButtons","FourButtonController","FiveButtons","FiveButtonController","SixButtons","SixButtonController","FourArrows","FourArrowController","Touch","TouchController","Joystick","JoystickController","JoystickWithButton","JoystickButtonController","TwoArrowsTwoButtons","TwoArrowsTwoButtonsController","TwoArrowsOneButton","TwoArrowsOneButtonController","TwoActionButtons","TwoActionButtonsController","registerPlatform","platformAPI","silentMode","expected","present","argument","message","testedInput","expectedType","originMethod","Gamee","GameeEmitter","_core","emitter","_platform","cbError","toString","_controller","gameInit","controllType","controllOpts","opt_cb","opt_share","getPlatform","modifiedResponse","purchaseItem","purchaseDetails","shareDetails","PlatformBridge","requests","_init","PostMessageBridge","endpoint","_gameeWin","MobileBridge","device","PlatformAPI","pause","callback","dispatchEvent","ghostShow","ghostHide","mute","unmute","opt_replay","opt_ghostMode","resetState","opt_resetState","instCount","opt_requestData","opt_callback","validateMethod","messId","preparedObject","request","messageId","doCall","_callback","id","doResponse","create","_resolveAPICall","response","postMessage","opt_data","webkit","messageHandlers","callbackHandler","_toDevice","_triggerMessage","JSON","parse","stringify","BulletClass","_self","_events","once","fnString","callbacks","off","fnToRemove","callbackObject","Bullet","Button","_pressed","Controller","buttonAlias","addButton","x","y","position","_bullet","isDown","gamee","keyCodes","oldName","newName","_gameeAPI","_platform_bridge","platformBridge","platformType","toLowerCase","top","parent","gameeSimulator","g","Function","eval"],"mappings":"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","file":"gamee-js.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","/*! @preserve build time 2019-10-15 10:05:46 */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 6);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.CustomEmitter = CustomEmitter;\nexports.wrapKeyEvent = wrapKeyEvent;\n/**\n * @class CustomEvent\n */\n(function shimCustomEvent() {\n\ttry {\n\t\tvar ce = new window.CustomEvent('test');\n\t\tce.preventDefault();\n\t\tif (ce.defaultPrevented !== true) {\n\t\t\t// IE has problems with .preventDefault() on custom events\n\t\t\t// http://stackoverflow.com/questions/23349191\n\t\t\tthrow new Error('Could not prevent default');\n\t\t}\n\t} catch (e) {\n\t\tvar CustomEvent = function CustomEvent(event, params) {\n\t\t\tvar evt, origPrevent;\n\t\t\tparams = params || {\n\t\t\t\tbubbles: false,\n\t\t\t\tcancelable: false,\n\t\t\t\tdetail: undefined\n\t\t\t};\n\n\t\t\tevt = document.createEvent(\"CustomEvent\");\n\t\t\tevt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n\t\t\torigPrevent = evt.preventDefault;\n\t\t\tevt.preventDefault = function () {\n\t\t\t\torigPrevent.call(this);\n\t\t\t\ttry {\n\t\t\t\t\tObject.defineProperty(this, 'defaultPrevented', {\n\t\t\t\t\t\tget: function get() {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthis.defaultPrevented = true;\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn evt;\n\t\t};\n\n\t\tCustomEvent.prototype = window.Event.prototype;\n\t\twindow.CustomEvent = CustomEvent; // expose definition to window\n\t}\n})();\n\n//addEventListener polyfill 1.0 / Eirik Backer / MIT Licence\n(function (win, doc) {\n\tif (win.addEventListener) return; //No need to polyfill\n\n\tfunction docHijack(p) {\n\t\tvar old = doc[p];doc[p] = function (v) {\n\t\t\treturn addListen(old(v));\n\t\t};\n\t}\n\tfunction addEvent(on, fn, self) {\n\t\treturn (self = this).attachEvent('on' + on, function (e) {\n\t\t\te = e || win.event;\n\t\t\te.preventDefault = e.preventDefault || function () {\n\t\t\t\te.returnValue = false;\n\t\t\t};\n\t\t\te.stopPropagation = e.stopPropagation || function () {\n\t\t\t\te.cancelBubble = true;\n\t\t\t};\n\t\t\tfn.call(self, e);\n\t\t});\n\t}\n\tfunction addListen(obj, i) {\n\t\ti = obj.length;\n\t\tif (i) {\n\t\t\twhile (i--) {\n\t\t\t\tobj[i].addEventListener = addEvent;\n\t\t\t}\n\t\t} else {\n\t\t\tobj.addEventListener = addEvent;\n\t\t}\n\t\treturn obj;\n\t}\n\n\taddListen([doc, win]);\n\tif ('Element' in win) win.Element.prototype.addEventListener = addEvent; //IE8\n\telse {\n\t\t\t//IE < 8\n\t\t\tdoc.attachEvent('onreadystatechange', function () {\n\t\t\t\taddListen(doc.all);\n\t\t\t}); //Make sure we also init at domReady\n\t\t\tdocHijack('getElementsByTagName');\n\t\t\tdocHijack('getElementById');\n\t\t\tdocHijack('createElement');\n\t\t\taddListen(doc.all);\n\t\t}\n})(window, document);\n\n// naomik event emiter http://stackoverflow.com/a/24216547/1866147\n// usage:\n// function Example() {\n// \tCustomEmitter.call(this);\n// }\n\n// // run it\n// var e = new Example();\n\n// e.addEventListener(\"something\", function (event) {\n// \tconsole.log(event)\n// });\n\n// e.dispatchEvent(new Event(\"something\"));\nfunction CustomEmitter() {\n\tvar eventTarget = document.createDocumentFragment();\n\n\tfunction delegate(method) {\n\t\tthis[method] = eventTarget[method].bind(eventTarget);\n\t}\n\n\t[\"addEventListener\", \"dispatchEvent\", \"removeEventListener\"].forEach(delegate, this);\n}\n\n/** ### wrapKeyEvent \n * \n * Handle old IE event differences for key events\n * \n * @param {Function} fn callback\n */\nfunction wrapKeyEvent(fn) {\n\treturn function (ev) {\n\t\tif (!ev || !ev.keyCode) {\n\t\t\tif (!ev) {\n\t\t\t\tev = window.event;\n\t\t\t}\n\n\t\t\tif (ev.which) {\n\t\t\t\tev.keyCode = ev.which;\n\t\t\t}\n\t\t}\n\n\t\treturn fn(ev);\n\t};\n}\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.validateDataType = exports.DataTypeException = exports.core = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _game_controllers = __webpack_require__(5);\n\nvar controllers = _interopRequireWildcard(_game_controllers);\n\nvar _shims = __webpack_require__(0);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// unlock audio\n// overrides native AudioContext & webkitAudioContext\n(function () {\n    // this works as a constructor\n    var overloadedAudioContext = function overloadedAudioContext(type) {\n        var ctx = new type();\n\n        // add audio resume to function on touchstart\n        if (ctx.state === 'suspended') {\n\n            var resume = function resume() {\n\n                // Check if hack is necessary. Only occurs in iOS6+ devices\n                // and only when you first boot the iPhone, or play a audio/video\n                // with a different sample rate\n                if (/(iPhone|iPad)/i.test(navigator.userAgent)) {\n                    var buffer = ctx.createBuffer(1, 1, 44100);\n                    var dummy = ctx.createBufferSource();\n                    dummy.buffer = buffer;\n                    dummy.connect(ctx.destination);\n                    dummy.start(0);\n                    dummy.disconnect();\n                }\n\n                ctx.resume();\n                setTimeout(function () {\n                    if (ctx.state === 'running') {\n                        document.body.removeEventListener(['touchcancel', 'touchend', 'touchenter', 'touchleave', 'touchmove', 'touchstart', 'mouseenter', 'mouseover', 'mousemove', 'mousedown', 'mouseup'].join(\" \"), resume, false);\n                    }\n                }, 0);\n            };\n\n            // only touchend will work, but hey, we tried...\n            // https://github.com/WebAudio/web-audio-api/issues/836\n            // https://www.chromestatus.com/feature/6406908126691328\n            document.body.addEventListener(['touchcancel', 'touchend', 'touchenter', 'touchleave', 'touchmove', 'touchstart', 'mouseenter', 'mouseover', 'mousemove', 'mousedown', 'mouseup'].join(\" \"), resume, false);\n        }\n        // allowed in JS to return different type of the object in the constructor\n        return ctx;\n    };\n\n    try {\n        if (typeof window.AudioContext !== 'undefined') {\n            window.AudioContext = overloadedAudioContext.bind(null, window.AudioContext);\n        } else if (typeof webkitAudioContext !== 'undefined') {\n            window.webkitAudioContext = overloadedAudioContext.bind(null, window.webkitAudioContext);\n        }\n    } catch (e) {\n        // throw error in async part\n        setTimeout(function () {\n            throw e;\n        }, 0);\n    }\n})();\n\n/**\n * @class core\n */\nvar core = exports.core = function () {\n\n    // # Gamee.js\n    //\n    // This file defines and expose a public API for games to communicate\n    // with Gamee*.\n    //\n    // Also it handles some requirements when Gamee is run in an desktop\n    // environment.\n    //\n    // \\* _later in the document Gamee will be referred as GameeApp to not\n    // be mistaken for word game_\n    //\n    // ** _GameeWebApp will refer to Gamee which is running in a desktop\n    // browser_\n\n    /** an empty function */\n    var noop = function noop() {};\n\n    var cache = {};\n\n    /** internal variables/constants (uppercase) coupled inside separate object for potential easy referencing */\n    var internals = {\n        VERSION: \"2.4.1\", // version of the gamee library\n        CAPABILITIES: [\"ghostMode\", \"saveState\", \"replay\", \"socialData\", \"rewardedAds\", \"coins\", \"logEvents\", \"playerData\", \"share\", \"gems\"], // supported capabilities\n        variant: 0, // for automating communication with server\n        soundUnlocked: false,\n        onReady: noop, // for intercepting real onReady because of behind the scenes variant handling\n        onGameStart: noop // for intercepting real onGameStart because of unlocking sound\n    };\n\n    /** ## gamee\n     *\n     * GameeApp interface for games. It is exposed as a `gamee` global\n     * object and games should only use its public methods and\n     * properties to communicate with the GameeApp.\n     *\n     * _There is also [$gameeNative](gamee_native.js.html) global object\n     * which handles internal parts of the communication._\n     */\n    var core = {};\n\n    //\n    // ## Signaling game state\n    //\n    // The game should signal the GameeApp its status (playing/game-over)\n    // and current score.\n    //\n\n    /** ### gamee.gameeInit\n     *\n     * Must be called first before any other gamee calls\n     * returns controller object the same way requestController did previously\n     * ctrlType/ctrlOpts - requested control type + options\n     * capabilities -> array of strings representing supported features:\n     * after the initialization onReady is invoked and after that game can use the api\n     */\n    core.gameeInit = function (ctrlType, ctrlOpts, capabilities, cb) {\n        var silentMode = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n        // let's validate the array here, so that all backends can benefit from it\n        var allOk = true,\n            cap = {};\n        if (capabilities !== undefined && Array.isArray(capabilities)) {\n            for (var i = 0; i < capabilities.length; i++) {\n                if (typeof capabilities[i] !== \"string\" || internals.CAPABILITIES.indexOf(capabilities[i]) === -1) allOk = false;\n                cap[capabilities[i]] = true;\n            }\n        } else allOk = false;\n\n        if (!allOk) throw \"Capabilities array passed to gameeInit is void, malformed or unsupported capabilites requested.\";\n        // TODO remove\n        // gameeNative.gameeInit(core, internals.VERSION, ctrlType, allOk ? capabilities : []);\n\n        this.native.createRequest(\"init\", {\n            version: internals.VERSION,\n            controller: ctrlType,\n            capabilities: cap\n        }, function (responseData) {\n            // remember capabilities of the game\n            cache.capabilities = cap;\n            //\n            // // Mute gamee-js console output\n            // cache.silentMode = silentMode;\n\n            // might fail if controller of this type doesnt exist\n            var error = null;\n            try {\n                if (this.native.platform === \"web\") {\n                    responseData.controller = core.controller.requestController(ctrlType, { enableKeyboard: true });\n                    this._bindKeyboardTriggers(responseData.controller);\n                } else {\n                    responseData.controller = core.controller.requestController(ctrlType, {});\n                }\n            } catch (err) {\n                error = err;\n            }\n\n            cb(error, responseData);\n        }.bind(this));\n        // TODO remove\n        // return core.controller.requestController(ctrlType, ctrlOpts);\n    };\n\n    core._bindKeyboardTriggers = function (controller) {\n        global.addEventListener('message', function (ev) {\n            switch (ev.data[0]) {\n                case 'button_button_down':\n                    controller.trigger(\"keydown\", { button: \"button\" });\n                    break;\n\n                case 'button_button_up':\n                    controller.trigger(\"keyup\", { button: \"button\" });\n                    break;\n\n                case 'button_left_up':\n                    controller.trigger(\"keyup\", { button: \"left\" });\n                    break;\n\n                case 'button_left_down':\n                    controller.trigger(\"keydown\", { button: \"left\" });\n                    break;\n\n                case 'button_right_down':\n                    controller.trigger(\"keydown\", { button: \"right\" });\n                    break;\n\n                case 'button_right_up':\n                    controller.trigger(\"keyup\", { button: \"right\" });\n                    break;\n\n                case 'button_up_down':\n                    controller.trigger(\"keydown\", { button: \"up\" });\n                    break;\n\n                case 'button_up_up':\n                    controller.trigger(\"keyup\", { button: \"up\" });\n                    break;\n\n                case 'button_down_down':\n                    controller.trigger(\"keydown\", { button: \"down\" });\n                    break;\n\n                case 'button_down_up':\n                    controller.trigger(\"keyup\", { button: \"down\" });\n                    break;\n\n                case 'button_a_down':\n                    controller.trigger(\"keydown\", { button: \"A\" });\n                    break;\n\n                case 'button_a_up':\n                    controller.trigger(\"keyup\", { button: \"A\" });\n                    break;\n\n                case 'button_b_down':\n                    controller.trigger(\"keydown\", { button: \"B\" });\n                    break;\n\n                case 'button_b_up':\n                    controller.trigger(\"keyup\", { button: \"B\" });\n                    break;\n            }\n        });\n    };\n\n    /** ### gamee.gameLoadingProgress\n     *\n     * Indicates how much content is already loaded in %.\n     */\n    core.gameLoadingProgress = function () {\n        var percentageSoFar = 0;\n\n        return function (percentage) {\n            if (typeof percentage !== \"number\" || percentage < 0 || percentage > 100) throw \"Percentage passed to gameLoadingProgress out of bounds or not a number.\";else if (percentage > percentageSoFar) {\n                percentageSoFar = percentage;\n                this.native.createRequest(\"gameLoadingProgress\", { percentage: percentage });\n            }\n        };\n    }();\n\n    /** ### gamee.gameReady\n     *\n     * Notifies platform game can accept start command.\n     */\n    core.gameReady = function () {\n        this.native.createRequest(\"gameReady\");\n    };\n\n    /** ### gamee.gameStart\n     *\n     * Indicates that game is ready to be started (even after restart).\n     */\n    // core.gameStart = function () {\n    //     gameeNative.gameLoadingProgress(100); // FB requires this\n    //     gameeNative.gameStart(gamee);\n    // };\n\n    /** ### gamee.updateScore\n     *\n     * sends score to UI\n     */\n    core.updateScore = function (score, opt_ghostSign) {\n        if (typeof score !== \"number\") throw \"Score passed to updateScore is not a number.\";\n        var data = {\n            score: parseInt(score, 10)\n        };\n        if (opt_ghostSign) {\n            data.ghostSign = true;\n        }\n        this.native.createRequest(\"updateScore\", data);\n        // core.native.createRequest(method, requestData, callback);\n    };\n\n    /** ### gamee.gameOver\n     *\n     * Indicates the game has ended, the game is waiting for subsequent onGameStart.\n     * Data has the same format as data received in onReady callback.\n     * Data must be string = responsibility for turning data structure into string is left to the game!\n     */\n    core.gameOver = function (opt_replayData, opt_saveState, opt_hideOverlay) {\n        opt_hideOverlay = opt_hideOverlay !== undefined ? opt_hideOverlay : false;\n        // var allOk = ((data !== undefined) && (typeof data === \"string\")) || (data === undefined);\n        // if (!allOk) console.error(\"Data provided to gameOver function must be string.\");\n        // gameeNative.gameOver(gamee, internals.variant, allOk ? data : \"\");\n        var requestData = {};\n        if (opt_replayData) {\n            if (!opt_replayData.hasOwnProperty(\"variant\")) {\n                opt_replayData.variant = \"\";\n            }\n            if (!opt_replayData.hasOwnProperty(\"data\")) {\n                throw \"Replay data must have `data` property\";\n            }\n            requestData.replayData = opt_replayData;\n        }\n        requestData.hideOverlay = opt_hideOverlay;\n\n        if (opt_saveState) {\n            requestData.state = opt_saveState;\n        }\n\n        core.native.createRequest(\"gameOver\", requestData);\n    };\n\n    /** ### gamee.gameSave\n     *\n     * Player has requested saving current game's state\n     * data must be string = responsibility for turning data structure into string is left to game!\n     * share must be expression evaluating to either true or false; it indicates, whether the game progress should be shared on feed\n     */\n    core.gameSave = function (data, share) {\n\n        if (!cache.capabilities.saveState) throw \"Save State not supported, you must add the capability on gamee.Init\";\n\n        core.native.createRequest(\"saveState\", { state: data, share: share });\n    };\n\n    core.requestSocial = function (cb, numberOfPlayers) {\n\n        if (!cache.capabilities.socialData) throw \"Social Data not supported, you must add the capability on gamee.Init\";\n\n        this.native.createRequest(\"requestSocial\", numberOfPlayers, function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.logEvent = function (eventName, eventValue) {\n\n        if (!cache.capabilities.logEvents) throw \"Log Events not supported, you must add the capability on gamee.Init\";\n\n        //var valuesToLogString = JSON.stringify(eventValue)\n\n        this.native.createRequest(\"logEvent\", { eventName: eventName, eventValue: eventValue }, function (error) {\n            if (error) {\n                throw error;\n            }\n        });\n    };\n\n    core.requestBattleData = function (cb) {\n        this.native.createRequest(\"requestBattleData\", undefined, function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.requestPlayerReplay = function (userID, cb) {\n\n        if (!cache.capabilities.replay) throw \"Replays not supported, you must add the capability on gamee.Init\";\n\n        this.native.createRequest(\"requestPlayerReplay\", { userID: userID }, function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.requestPlayerSaveState = function (userID, cb) {\n        this.native.createRequest(\"requestPlayerSaveState\", { userID: userID }, function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.playerEnteredToGameRoom = function () {\n        this.native.createRequest('playerEnteredToGameRoom');\n    };\n\n    core.playerLeftGameRoom = function () {\n        this.native.createRequest('playerLeftGameRoom');\n    };\n\n    core.purchaseItemWithCoins = function (options, cb, oldMethod) {\n\n        if (!cache.capabilities.coins) throw \"Coins purchases not supported, you must add the capability on gamee.Init\";\n\n        if (options) {\n            var propertiesList = [\"coinsCost\", \"itemName\"];\n            propertiesList.forEach(function (property) {\n                if (!options.hasOwnProperty(property)) throw \"Purchase Options must have `\" + property + \"` property\";\n            });\n        }\n\n        if (!this.isSilentModeEnabled()) {\n            console.log(options);\n        }\n\n        var method = \"purchaseItemWithCoins\";\n        if (oldMethod !== undefined && oldMethod === true) {\n            method = \"purchaseItem\";\n        }\n        this.native.createRequest(method, options, function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.purchaseItemWithGems = function (options, cb) {\n\n        if (!cache.capabilities.gems) throw \"Gems purchases not supported, you must add the capability on gamee.Init\";\n\n        if (options) {\n            var propertiesList = [\"gemsCost\", \"itemName\"];\n            propertiesList.forEach(function (property) {\n                if (!options.hasOwnProperty(property)) throw \"Purchase options must have `\" + property + \"` property\";\n            });\n        }\n\n        if (!this.isSilentModeEnabled()) {\n            console.log(options);\n        }\n\n        this.native.createRequest(\"purchaseItemWithGems\", options, function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.share = function (options, cb) {\n\n        if (!cache.capabilities.share) throw \"Share option not supported, you must add the capability on gamee.Init\";\n\n        if (options) {\n            var propertiesList = [\"destination\"];\n            propertiesList.forEach(function (property) {\n                if (!options.hasOwnProperty(property)) throw \"Share Options must have `\" + property + \"` property\";\n            });\n        }\n\n        if (!this.isSilentModeEnabled()) {\n            console.log(options);\n        }\n\n        this.native.createRequest(\"share\", options, function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.loadRewardedVideo = function (cb) {\n\n        if (!cache.capabilities.rewardedAds) throw \"Rewarded Ads not supported, you must add the capability on gamee.Init\";\n\n        this.native.createRequest(\"loadRewardedVideo\", function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.showRewardedVideo = function (cb) {\n\n        if (!cache.capabilities.rewardedAds) throw \"Rewarded Ads not supported, you must add the capability on gamee.Init\";\n\n        this.native.createRequest(\"showRewardedVideo\", function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.showSubscribeDialog = function (cb) {\n        this.native.createRequest(\"showSubscribeDialog\", function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.requestPlayerData = function (cb, userID) {\n\n        if (!cache.capabilities.playerData) throw \"Player Data not supported, you must add the capability on gamee.Init\";\n\n        var options = undefined;\n        if (userID) {\n            options = { userID: userID };\n        }\n\n        this.native.createRequest(\"requestPlayerData\", options, function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.startSignal = function (data) {\n        var error;\n\n        if (data.replay && !cache.capabilities.replay) error = \"Game doesn't support replay. \";\n\n        if (data.ghostMode && !cache.capabilities.ghostMode) error = \"Game doesn't support ghost Mode. \";\n\n        return error;\n    };\n    //\n    // ## Private objects and methods\n    // These are internal objects in closed scope. Good to know about them\n    // when debugging.\n\n    //\n    // ## gamee.controller\n    //\n    // Namespace where the methods for controller are published.\n    //\n\n    /**\n     * TODO transform this into instance of gamee class\n     */\n    core.controller = {\n        /** ### mainController\n         *\n         * Current controller.\n         */\n        mainController: null,\n\n        /** ### requestController\n         *\n         * Factory method to create a controller. It creates the controller\n         * and signals to GameeApp which type the game requires\n         *\n         * You should called this method once before calling\n         * `gamee.gameStart()`.\n         *\n         * @param {String} type type of controller (see [controllerTypes](#controllertypes))\n         * @param {Object} [opts] optional controller options\n         * {'enableKeyboard': .., 'buttons': ...}\n         * @param {boolean} [opts.enableKeyboard] enable the keyboard\n         * @param {Object} [opts.buttons] remap buttons {'oldKey': 'newKey',\n         * 'left': 'break' ..}\n         */\n        requestController: function requestController(type, opts) {\n            if (type === \"FullScreen\") return null;\n\n            var controller = createController(type, opts);\n\n            this.mainController = controller;\n\n            return controller;\n        },\n\n        /** ### additionalController\n         *\n         * Construct an additional controller. Sometimes games require a\n         * different controller depending on platform (eg. touch on mobile,\n         e but Four Buttons on desktop)\n         *\n         * **This is currently supported only for GameeWebApp** as a way to\n         * have alternate keybinding. The game should request a type used\n         * for mobile platform and then some other as *additionalController*\n         * if alternate keybinding is needed;\n         */\n        // TODO remove this function\n        additionalController: function additionalController(type, opts) {\n            var controller = createController(type, opts);\n            gameeNative.additionalController(type);\n\n            return controller;\n        },\n\n        /** ### trigger\n         *\n         * Triggers and event for the controller\n         *\n         * This is called by GameeApp to trigger the *keydown*, *keyup*\n         * events. For more info see [Controller](#controller)\n         *\n         * @param {String} eventName name of the event\n         * @param {*} [data,...] data to pass for the event\n         *\n         */\n        trigger: function trigger() {\n            var i;\n\n            if (this.mainController) {\n                this.mainController.trigger.apply(this.mainController, arguments);\n            } else {\n                throw new Error('No controller present');\n            }\n        }\n    };\n\n    /** ### core._keydown\n     *\n     * A helper function to listen for `keydown` events on window object.\n     *\n     * @param {Function} fn callback to handle the event\n     */\n    core._keydown = function (fn) {\n        global.addEventListener('keydown', (0, _shims.wrapKeyEvent)(fn));\n    };\n\n    /** ### core._keyup\n     *\n     * A helper function to listen for `keyup` events on window object.\n     *\n     * @param {Function} fn callback to handle the event\n     */\n    core._keyup = function (fn) {\n        global.addEventListener('keyup', (0, _shims.wrapKeyEvent)(fn));\n    };\n\n    /** ### createController\n     *\n     * Function to create a controller.\n     *\n     * *see [requestController](#requestcontroller)\n     *\n     * @param {String} type\n     * @param {Object} [opts]\n     * @returns {Controller} controller\n     */\n    function createController(type, opts) {\n        var btn, controller;\n\n        if (!controllerTypes[type]) {\n            throw new Error('Unsupported controller type, ' + type);\n        }\n\n        opts = opts || {};\n\n        controller = new controllerTypes[type]();\n\n        if (opts.enableKeyboard) {\n            controller.enableKeyboard(core);\n        }\n\n        if (opts.buttons) {\n            for (btn in opts.buttons) {\n                controller.remapButton(btn, opts.buttons[btn]);\n            }\n        }\n\n        return controller;\n    }\n\n    /** ### controllerTypes\n     *\n     * List of controller types and their coresponding classes.\n     *\n     * *see [Controllers](#controllers) for more info*\n     * @requires Controller\n     */\n    var controllerTypes = {\n        'OneButton': controllers.OneButtonController,\n        'TwoButtons': controllers.TwoButtonController,\n        'FourButtons': controllers.FourButtonController,\n        'FiveButtons': controllers.FiveButtonController,\n        'SixButtons': controllers.SixButtonController,\n        'FourArrows': controllers.FourArrowController,\n        'Touch': controllers.TouchController,\n        'Joystick': controllers.JoystickController,\n        'JoystickWithButton': controllers.JoystickButtonController,\n        'TwoArrowsTwoButtons': controllers.TwoArrowsTwoButtonsController,\n        'TwoArrowsOneButton': controllers.TwoArrowsOneButtonController,\n        'TwoActionButtons': controllers.TwoActionButtonsController\n    };\n\n    core.registerPlatform = function (platformAPI) {\n        // platformAPI.addEventListener()\n        // TODO ?\n    };\n\n    /**\n     * Is true mute all console outputs\n     * @return {boolean}\n     */\n    core.isSilentModeEnabled = function () {\n        return cache.silentMode;\n    };\n\n    return core;\n}();\n\nvar DataTypeException = exports.DataTypeException = function DataTypeException(expected, present, argument, method) {\n    this.expected = expected;\n    this.present = present;\n    this.method = method;\n    this.argument = argument;\n    this.message = \"Invalid data type in method \" + this.method + \", argument \" + this.argument + \" is expected to be \" + this.expected + \", but found \" + this.present;\n};\n\nvar validateDataType = exports.validateDataType = function validateDataType(testedInput, expectedType, argument, originMethod) {\n    switch (expectedType) {\n\n        case \"array\":\n            if (!Array.isArray(testedInput)) throw new DataTypeException(expectedType, typeof testedInput === \"undefined\" ? \"undefined\" : _typeof(testedInput), argument, originMethod);\n            break;\n\n        default:\n            if ((typeof testedInput === \"undefined\" ? \"undefined\" : _typeof(testedInput)) !== expectedType) throw new DataTypeException(expectedType, typeof testedInput === \"undefined\" ? \"undefined\" : _typeof(testedInput), argument, originMethod);\n    }\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(7)))\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Gamee = exports.GameeEmitter = undefined;\n\nvar _core = __webpack_require__(1);\n\nvar _shims = __webpack_require__(0);\n\n/**\n * gameeAPI module desc\n * @module gameeAPI\n */\n\n/**\n * Emit events\n * @class GameeEmitter\n * @extends CustomEmitter\n */\nvar GameeEmitter = exports.GameeEmitter = function GameeEmitter() {\n    _shims.CustomEmitter.call(this);\n};\n\n/**\n * @class Gamee\n * @requires core\n *\n */\nvar Gamee = exports.Gamee = function Gamee(platform) {\n    /**\n     * @instance\n     *\n     * @fires gameeAPI:GameeEmitter~start\n     * @fires gameeAPI:GameeEmitter~mute\n     * @fires gameeAPI:GameeEmitter~unmute\n     * @fires gameeAPI:GameeEmitter~pause\n     * @fires gameeAPI:GameeEmitter~unpause\n     * @fires gameeAPI:GameeEmitter~ghostHide\n     * @fires gameeAPI:GameeEmitter~ghostShow\n     */\n    this.emitter = new GameeEmitter();\n    this._platform = platform;\n};\n\nGamee.prototype = function () {\n\n    var cbError = function cbError(err) {\n        if (err) {\n            throw \"Error \" + err.toString();\n        }\n    };\n\n    return {\n        _controller: _core.core.controller,\n        /**\n         * gameInit\n         * @memberof Gamee\n         * @param {string} controllType\n         * @param {object} controllOpts\n         * @param {string[]} capabilities\n         * @param {gameInitCallback} cb\n         * @param {boolean} silentMode\n         */\n        gameInit: function gameInit(controllType, controllOpts, capabilities, cb) {\n            var silentMode = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n            (0, _core.validateDataType)(controllType, \"string\", \"controllType\", \"gamee.updateScore\");\n            (0, _core.validateDataType)(controllOpts, \"object\", \"controllOpts\", \"gamee.gameInit\");\n            (0, _core.validateDataType)(capabilities, \"array\", \"capabilities\", \"gamee.gameInit\");\n            (0, _core.validateDataType)(cb, \"function\", \"cb\", \"gamee.gameInit\");\n            (0, _core.validateDataType)(silentMode, \"boolean\", \"silentMode\", \"gamee.gameInit\");\n            var result = _core.core.gameeInit(controllType, controllOpts, capabilities, cb, silentMode);\n            // cb(null, result);\n        },\n\n        /**\n         * gameLoadingProgress\n         *\n         *     gamee.gameLoadingProgress()\n         *\n         * @memberof Gamee\n         * @param {number} percentage current loading progress\n         * @param {Gamee~voidCallback} [opt_cb]\n         *\n         */\n        gameLoadingProgress: function gameLoadingProgress(percentage, opt_cb) {\n            (0, _core.validateDataType)(percentage, \"number\", \"percentage\", \"gamee.gameLoadingProgress\");\n            opt_cb = opt_cb || cbError;\n            (0, _core.validateDataType)(opt_cb, \"function\", \"opt_cb\", \"gamee.gameLoadingProgress\");\n            _core.core.gameLoadingProgress(percentage);\n            opt_cb(null);\n        },\n\n        /**\n         * gameReady\n         *\n         * @memberof Gamee\n         * @param {Gamee~voidCallback} [opt_cb]\n         */\n        gameReady: function gameReady(opt_cb) {\n            opt_cb = opt_cb || cbError;\n            (0, _core.validateDataType)(opt_cb, \"function\", \"opt_cb\", \"gamee.gameReady\");\n            _core.core.gameReady();\n            opt_cb(null);\n        },\n\n        /**\n         * gameSave\n         *\n         * NOTE: There are 2 signatures for this function\n         *\n         *     gamee.gameSave(data, opt_cb)\n         *     gamee.gameSave(data, opt_share, opt_cb)\n         *\n         * @memberof Gamee\n         * @param {String} data current ingame progress\n         * @param {Boolean} [opt_share=false]\n         * @param {Gamee~voidCallback} [opt_cb]\n         *\n         */\n        gameSave: function gameSave(data, opt_share, opt_cb) {\n            var share = false,\n                cb;\n            (0, _core.validateDataType)(data, \"string\", \"data\", \"gamee.gameSave\");\n            if (typeof opt_share === 'function') opt_cb = opt_share;else if (typeof opt_share !== \"undefined\") (0, _core.validateDataType)(opt_share, \"boolean\", \"opt_share\", \"gamee.gameSave\");\n\n            opt_cb = opt_cb || cbError;\n            (0, _core.validateDataType)(opt_cb, \"function\", \"opt_cb\", \"gamee.gameSave\");\n            _core.core.gameSave(data, share);\n            opt_cb(null);\n        },\n\n        /**\n         * getPlatform\n         *\n         * @memberof Gamee\n         * @returns {string} platform type can be android | ios | web | fb\n         */\n        getPlatform: function getPlatform() {\n            return this._platform;\n        },\n\n        /**\n         * updateScore\n         *\n         * @memberof Gamee\n         * @param {number} score\n         * @param {boolean} [opt_ghostSign=false] If true, score will be updated for ghost instead.\n         * @param {Gamee~voidCallback} [opt_cb]\n         */\n        updateScore: function updateScore(score, opt_ghostSign, opt_cb) {\n            (0, _core.validateDataType)(score, \"number\", \"score\", \"gamee.updateScore\");\n            if (typeof opt_ghostSign === \"function\") opt_cb = opt_ghostSign;else if (typeof opt_ghostSign !== \"undefined\") (0, _core.validateDataType)(opt_ghostSign, \"boolean\", \"opt_ghostSign\", \"gamee.updateScore\");\n\n            opt_cb = opt_cb || cbError;\n            (0, _core.validateDataType)(opt_cb, \"function\", \"opt_cb\", \"gamee.updateScore\");\n            _core.core.updateScore(score, opt_ghostSign);\n            opt_cb(null);\n        },\n\n        /**\n         * gameOver\n         *\n         * @memberof Gamee\n         * @param {Gamee~ReplayData} [opt_replayData]\n         * @param {Gamee~voidCallback} [opt_cb]\n         * @param {Gamee~object} [opt_saveState]\n         * @param {Gamee~boolean} [opt_hideOverlay]\n         */\n        gameOver: function gameOver(opt_replayData, opt_cb, opt_saveState, opt_hideOverlay) {\n            if (typeof opt_replayData === \"function\") opt_cb = opt_replayData;else if (typeof opt_replayData !== \"undefined\") (0, _core.validateDataType)(opt_replayData, \"object\", \"opt_replayData\", \"gamee.gameOver\");\n\n            if (typeof opt_hideOverlay !== 'undefined') {\n                (0, _core.validateDataType)(opt_hideOverlay, \"boolean\", \"opt_hideOverlay\", \"gamee.gameOver\");\n            }\n\n            opt_cb = opt_cb || cbError;\n            (0, _core.validateDataType)(opt_cb, \"function\", \"opt_cb\", \"gamee.gameOver\");\n            _core.core.gameOver(opt_replayData, opt_saveState, opt_hideOverlay);\n            opt_cb(null);\n        },\n\n        /**\n         * requestSocialData\n         *\n         * @memberof Gamee\n         * @param {Gamee~requestSocialDataCallback} cb\n         * @param {number} numberOfPlayers\n         */\n        requestSocial: function requestSocial(cb, numberOfPlayers) {\n            (0, _core.validateDataType)(cb, \"function\", \"cb\", \"gamee.requestSocial\");\n\n            // functionality supposed to be removed once we do update for iOS\n            var data = _core.core.requestSocial(function (error, responseData) {\n                var modifiedResponse = !responseData.hasOwnProperty(\"socialData\") ? { socialData: responseData } : responseData;\n                cb(null, modifiedResponse);\n            }, numberOfPlayers);\n\n            // var data = core.requestSocial(cb);\n            //cb(null, data);\n        },\n\n        /**\n        * logEvent\n        *\n        * @memberof Gamee\n        * @param {string} eventName\n        * @param {string} eventValue\n        */\n        logEvent: function logEvent(eventName, eventValue) {\n\n            (0, _core.validateDataType)(eventName, \"string\", \"eventName\", \"gamee.logEvent\");\n\n            if (!eventName || eventName.length > 24) {\n                console.error(\"eventName parameter cant be null and can only contain up to 24 characters\");\n                return;\n            }\n\n            (0, _core.validateDataType)(eventValue, \"string\", \"eventValue\", \"gamee.logEvent\");\n\n            if (!eventValue || eventValue.length > 160) {\n                console.error(\"eventValue parameter cant be null and can only contain up to 160 characters\");\n                return;\n            }\n\n            _core.core.logEvent(eventName, eventValue);\n        },\n\n        /**\n         * requestBattleData\n         *\n         * @memberof Gamee\n         * @param {Gamee~requestBattleDataDataCallback} cb\n         */\n        requestBattleData: function requestBattleData(cb) {\n            (0, _core.validateDataType)(cb, \"function\", \"cb\", \"gamee.requestBattleData\");\n\n            _core.core.requestBattleData(cb);\n        },\n\n        /**\n         * requestPlayerReplay\n         *\n         * @memberof Gamee\n         * @param {number} userID\n         * @param {Gamee~requestPlayerReplayDataCallback} cb\n         */\n        requestPlayerReplay: function requestPlayerReplay(userID, cb) {\n\n            (0, _core.validateDataType)(userID, \"number\", \"userID\", \"gamee.requestPlayerReplay\");\n            (0, _core.validateDataType)(cb, \"function\", \"cb\", \"gamee.requestPlayerReplay\");\n\n            _core.core.requestPlayerReplay(userID, cb);\n        },\n\n        /**\n         * requestPlayerSaveState\n         *\n         * @memberof Gamee\n         * @param {number} userID\n         * @param {Gamee~requestPlayerSaveStateDataCallback} cb\n         */\n        requestPlayerSaveState: function requestPlayerSaveState(userID, cb) {\n\n            (0, _core.validateDataType)(userID, \"number\", \"userID\", \"gamee.requestPlayerSaveState\");\n            (0, _core.validateDataType)(cb, \"function\", \"cb\", \"gamee.requestPlayerSaveState\");\n\n            _core.core.requestPlayerSaveState(userID, cb);\n        },\n\n        /*\n         * playerEnteredToGameRoom\n         * @member of Gamee\n         */\n        playerEnteredToGameRoom: function playerEnteredToGameRoom() {\n            _core.core.playerEnteredToGameRoom();\n        },\n\n        /*\n         * playerLeftGameRoom\n         * @member of Gamee\n         */\n        playerLeftGameRoom: function playerLeftGameRoom() {\n            _core.core.playerLeftGameRoom();\n        },\n\n        /*\n        *purchaseItem\n        *@member of Gamee\n        *@param {object} purchaseDetails\n        *@param {Gamee~purchaseItemDataCallback} cb\n        */\n        purchaseItem: function purchaseItem(purchaseDetails, cb) {\n\n            (0, _core.validateDataType)(purchaseDetails, \"object\", \"purchaseDetails\", \"gamee.purchaseItem\");\n            (0, _core.validateDataType)(cb, \"function\", \"cb\", \"gamee.purchaseItem\");\n\n            _core.core.purchaseItemWithCoins(purchaseDetails, cb, true);\n        },\n\n        /*\n        *purchaseItemWithCoins\n        *@member of Gamee\n        *@param {object} purchaseDetails\n        *@param {Gamee~purchaseItemDataCallback} cb\n        */\n        purchaseItemWithCoins: function purchaseItemWithCoins(purchaseDetails, cb) {\n            (0, _core.validateDataType)(purchaseDetails, \"object\", \"purchaseDetails\", \"gamee.purchaseItemWithCoins\");\n            (0, _core.validateDataType)(cb, \"function\", \"cb\", \"gamee.purchaseItemWithCoins\");\n\n            _core.core.purchaseItemWithCoins(purchaseDetails, cb);\n        },\n\n        /*\n        *purchaseItemWithGems\n        *@member of Gamee\n        *@param {object} purchaseDetails\n        *@param {Gamee~purchaseItemWithGemsDataCallback} cb\n        */\n        purchaseItemWithGems: function purchaseItemWithGems(purchaseDetails, cb) {\n\n            (0, _core.validateDataType)(purchaseDetails, \"object\", \"purchaseDetails\", \"gamee.purchaseItemWithGems\");\n            (0, _core.validateDataType)(cb, \"function\", \"cb\", \"gamee.purchaseItemWithGems\");\n\n            _core.core.purchaseItemWithGems(purchaseDetails, cb);\n        },\n\n        /*share\n        *@member of Gamee\n        *@param {object} shareDetails\n        *@param {Gamee~shareDataCallback} cb\n        */\n        share: function share(shareDetails, cb) {\n            (0, _core.validateDataType)(shareDetails, \"object\", \"shareDetails\", \"gamee.share\");\n            (0, _core.validateDataType)(cb, \"function\", \"cb\", \"gamee.share\");\n\n            _core.core.share(shareDetails, cb);\n        },\n\n        /*\n        *loadRewardedVideo\n        *@member of Gamee\n        *@param {Gamee~loadRewardedVideo} cb\n        */\n        loadRewardedVideo: function loadRewardedVideo(cb) {\n\n            (0, _core.validateDataType)(cb, \"function\", \"cb\", \"gamee.loadRewardedVideo\");\n            _core.core.loadRewardedVideo(cb);\n        },\n\n        /*\n        *showRewardedVideo\n        *@member of Gamee\n        *@param{Gamee~showRewardedVideo} cb\n        */\n        showRewardedVideo: function showRewardedVideo(cb) {\n\n            (0, _core.validateDataType)(cb, \"function\", \"cb\", \"gamee.showRewardedVideo\");\n            _core.core.showRewardedVideo(cb);\n        },\n\n        /*\n         * showSubscribeDialog\n         * @member of Gamee\n         * @param{Gamee~showSubscribeDialog} cb\n         */\n        showSubscribeDialog: function showSubscribeDialog(cb) {\n            (0, _core.validateDataType)(cb, \"function\", \"cb\", \"gamee.showSubscribeDialog\");\n            _core.core.showSubscribeDialog(cb);\n        },\n\n        /**\n        *requestPlayerData\n        *@member of Gamee\n        *@param{Gamee~requestPlayerData} cb\n        * @param {number} userID\n        */\n        requestPlayerData: function requestPlayerData(cb, userID) {\n\n            (0, _core.validateDataType)(cb, \"function\", \"cb\", \"gamee.requestPlayerData\");\n            if (userID !== undefined) {\n                (0, _core.validateDataType)(userID, \"number\", \"userId\", \"gamee.requestPlayerData\");\n            }\n            _core.core.requestPlayerData(cb, userID);\n        }\n    };\n\n    /**\n     *\n     * @typedef ReplayData\n     * @param {string} variant\n     * @param {string} data\n     */\n\n    /**\n     * This callback is displayed as part of the Requester class.\n     * @callback Gamee~voidCallback\n     * @param {string} responseCode\n     */\n\n    /**\n     * This callback is displayed as part of the Requester class.\n     * @callback Gamee~gameInitCallback\n     * @param {object} data\n     * @param {string} responseCode\n     */\n\n    /**\n     * This callback is displayed as part of the Requester class.\n     * @callback Gamee~requestSocialDataCallback\n     * @param {object} data\n     * @param {string} responseCode\n     */\n}();\n\n/**\n * Signals that game should start as normal|replay|ghost game.\n * Signal means there is no overlay over the game.\n * This signal is also being used for game restart. If previous\n * instance of the game was running, it should be terminated without\n * any additional calls and current progress should be tossed.\n * @event gameeAPI:GameeEmitter~start\n * @type {object}\n * @property {EventDetailStart} detail - Common property of events\n */\n\n/**\n * Data carried with start event.\n * @typedef EventDetailStart\n * @property {Gamee~voidCallback} callback - called after finishing task\n * @property {boolean} [opt_resetState=false] - if true, game must delete current progress and saved progress\n * @property {boolean} [opt_replay] - if true, game must run in replay mode\n * @property {boolean} [opt_ghostMode] - if true, game must run in ghost mode\n */\n\n/**\n * After that signal, game must silent all sounds immediately.\n * Game must remain silent until unmute signal occures.\n * @event gameeAPI:GameeEmitter~mute\n * @type {object}\n * @property {EventDetailVoid} detail - Common property of events\n */\n\n/**\n * After unmute signal, game can play sounds again.\n * @event gameeAPI:GameeEmitter~unmute\n * @type {object}\n * @property {EventDetailVoid} detail - Common property of events\n */\n\n/**\n * Pause signal means there appeared overlay over the game. Player\n * is unable to reach the context of the game anymore. So game should\n * pause all its acctions immediately.\n * @event gameeAPI:GameeEmitter~pause\n * @type {object}\n * @property {EventDetailVoid} detail - Common property of events\n */\n\n/**\n * Unpause signal means there is no overlay over the game anymore.\n * Game should continue with all previous actions.\n * @event gameeAPI:GameeEmitter~unpause\n * @type {object}\n * @property {EventDetailVoid} detail - Common property of events\n */\n\n/**\n * Signal ghostHide can appear only if game is running in ghost mode.\n * Game should hide ghost behavior and look like exactly as game without\n * the ghost (if this is possible).\n * @event gameeAPI:GameeEmitter~ghostHide\n * @type {object}\n * @property {EventDetailVoid} detail - Common property of events\n */\n\n/**\n * Signal ghostShow can appear only if game is running in ghost mode.\n * Game should show ghost again if it was hidden. If ghost died or ended\n * while it was hidden, game should point that out, so the player can understand\n * why the ghost is not visible anymore.\n * @event gameeAPI:GameeEmitter~ghostShow\n * @type {object}\n * @property {EventDetailVoid} detail - Common property of events\n */\n\n/**\n * Data carried with various events. Contains only callback method.\n * @typedef {object} EventDetailVoid\n * @property {Gamee~voidCallback} callback - call after finishing task\n */\n\n/**\n * @type {function}\n * @param {MyEvent} e - The observable event.\n * @listens gameeAPI:GameeEmitter~event:snowball\n */\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.PlatformAPI = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.PlatformBridge = PlatformBridge;\nexports.PostMessageBridge = PostMessageBridge;\nexports.MobileBridge = MobileBridge;\n\nvar _core = __webpack_require__(1);\n\n/**\n *\n * @requires core\n *\n * @typedef PlatformAPI\n * @param {EventTarget} emitter\n * @param {function} _pause\n * @param {function} _resume\n * @param {function} _ghostShow\n * @param {function} _ghostHide\n * @param {function} _mute\n * @param {function} _unmute\n * @param {function} _start\n */\nvar PlatformAPI = exports.PlatformAPI = {\n\temitter: null,\n\tpause: function pause(cb) {\n\t\tvar event = new CustomEvent('pause', {\n\t\t\tdetail: {\n\t\t\t\tcallback: cb\n\t\t\t}\n\t\t});\n\t\tthis.emitter.dispatchEvent(event);\n\t},\n\tresume: function resume(cb) {\n\t\tvar event = new CustomEvent('resume', {\n\t\t\tdetail: {\n\t\t\t\tcallback: cb\n\t\t\t}\n\t\t});\n\t\tthis.emitter.dispatchEvent(event);\n\t},\n\tghostShow: function ghostShow(cb) {\n\t\tvar event = new CustomEvent('ghostShow', {\n\t\t\tdetail: {\n\t\t\t\tcallback: cb\n\t\t\t}\n\t\t});\n\t\tthis.emitter.dispatchEvent(event);\n\t},\n\tghostHide: function ghostHide(cb) {\n\t\tvar event = new CustomEvent('ghostHide', {\n\t\t\tdetail: {\n\t\t\t\tcallback: cb\n\t\t\t}\n\t\t});\n\t\tthis.emitter.dispatchEvent(event);\n\t},\n\tmute: function mute(cb) {\n\t\tvar event = new CustomEvent('mute', {\n\t\t\tdetail: {\n\t\t\t\tcallback: cb\n\t\t\t}\n\t\t});\n\t\tthis.emitter.dispatchEvent(event);\n\t},\n\tunmute: function unmute(cb) {\n\t\tvar event = new CustomEvent('unmute', {\n\t\t\tdetail: {\n\t\t\t\tcallback: cb\n\t\t\t}\n\t\t});\n\t\tthis.emitter.dispatchEvent(event);\n\t},\n\tstart: function start(data, cb) {\n\t\tvar event = new CustomEvent('start', {\n\t\t\tdetail: {\n\t\t\t\tcallback: cb\n\t\t\t}\n\t\t});\n\n\t\tvar error = _core.core.startSignal(data);\n\t\tif (error) {\n\t\t\tcb(error);\n\t\t\treturn;\n\t\t}\n\n\t\tif (data.replay) event.detail.opt_replay = true;\n\t\tif (data.ghostMode) event.detail.opt_ghostMode = true;\n\t\tif (data.resetState) event.detail.opt_resetState = true;\n\t\tif (data.replayData) {\n\t\t\tevent.detail.replayData = data.replayData;\n\t\t}\n\n\t\tthis.emitter.dispatchEvent(event);\n\t}\n};\n\n/**\n * @class PlatformBridge\n *\n */\nfunction PlatformBridge() {\n\tthis.requests = {};\n\tthis.platform = \"\";\n\tthis._init();\n}\n\nPlatformBridge.prototype = {\n\tinstCount: 0,\n\t_init: function _init() {},\n\tcreateRequest: function createRequest(method, opt_requestData, opt_callback) {\n\t\tif (!this.validateMethod(method)) return;\n\t\tif (typeof opt_requestData === 'function') {\n\t\t\topt_callback = opt_requestData;\n\t\t\topt_requestData = undefined;\n\t\t}\n\n\t\tvar messId = this.instCount++;\n\n\t\tif (typeof opt_callback !== 'undefined') {\n\t\t\tthis.requests[messId] = opt_callback;\n\t\t}\n\n\t\tvar preparedObject = {\n\t\t\trequest: {\n\t\t\t\tmethod: method,\n\t\t\t\tmessageId: messId,\n\t\t\t\tdata: null\n\t\t\t}\n\t\t};\n\n\t\tthis.doCall(preparedObject, opt_requestData);\n\t},\n\tvalidateMethod: function validateMethod(method) {\n\t\treturn method === \"gameLoadingProgress\" ? false : true;\n\t},\n\t/**\n  * @abstract\n  */\n\tdoCall: function doCall(preparedObject, requestData) {\n\t\tthrow \"Not implemented\";\n\t},\n\t_callback: function _callback(id, responseData) {\n\t\tvar cb = this.requests[id];\n\t\tdelete this.requests[id];\n\t\tif (cb) cb(responseData);\n\t},\n\t/**\n  * @abstract\n  */\n\tdoResponse: function doResponse(preparedObject, responseData) {\n\t\tthrow \"Not implemented\";\n\t}\n};\n\n/**\n * @class PostMessageBridge\n * @requires PlatformBridge\n */\nfunction PostMessageBridge(endpoint) {\n\tthis._gameeWin = endpoint;\n\tPlatformBridge.call(this);\n\tthis.platform = \"web\";\n}\n\nPostMessageBridge.prototype = Object.create(PlatformBridge.prototype);\nPostMessageBridge.prototype.constructor = PostMessageBridge;\n\nPostMessageBridge.prototype._init = function () {\n\n\twindow.addEventListener('message', function (ev) {\n\t\t// if(ev.origin === \"source we want\")\n\t\t// console.log(\"_triggerMessage detail: \" + ev.detail);\n\t\t// console.log(\"_triggerMessage data: \" + ev.data);\n\t\tvar data;\n\t\tif (_typeof(ev.detail) === \"object\" && typeof ev.detail !== null) {\n\t\t\tdata = ev.detail;\n\t\t} else if (_typeof(ev.data) === \"object\") {\n\t\t\tdata = ev.data;\n\t\t} else {\n\t\t\t// message is not from native platform\n\t\t\treturn;\n\t\t}\n\n\t\tif (!_core.core.isSilentModeEnabled()) {\n\t\t\tconsole.log(JSON.stringify(data, null, 4) + ' data');\n\t\t}\n\t\t// this is request\n\t\tif (data.request && data.request.method && typeof data.request.messageId !== \"undefined\") {\n\t\t\tthis._resolveAPICall(data.request.method, data.request.messageId, data.request.data);\n\t\t}\n\t\t// this is reponse\n\t\telse if (data.response && typeof data.response.messageId !== \"undefined\") {\n\t\t\t\tif (data.error) throw data.error;\n\t\t\t\tthis._callback(data.response.messageId, data.response.data);\n\t\t\t}\n\t\t// else this message target is not this framework\n\t}.bind(this), false);\n};\n\nPostMessageBridge.prototype.doCall = function (preparedObject, requestData) {\n\tif ((typeof requestData === 'undefined' ? 'undefined' : _typeof(requestData)) === \"object\") {\n\t\tpreparedObject.request.data = requestData || {};\n\t}\n\tthis._gameeWin.postMessage(preparedObject, \"*\");\n};\n\nPostMessageBridge.prototype.doResponse = function (messageId, responseData) {\n\tvar preparedObject = {\n\t\tversion: this.version,\n\t\tresponse: {\n\t\t\tmessageId: messageId\n\t\t}\n\t};\n\n\tif (responseData) preparedObject.data = responseData;\n\n\tthis._gameeWin.postMessage(preparedObject, \"*\");\n};\n\nPostMessageBridge.prototype._resolveAPICall = function (method, messageId, opt_data) {\n\tvar cb = this.doResponse.bind(this, messageId);\n\n\tswitch (method) {\n\t\tcase \"pause\":\n\t\t\tPlatformAPI.pause(cb);\n\t\t\tbreak;\n\t\tcase \"resume\":\n\t\t\tPlatformAPI.resume(cb);\n\t\t\tbreak;\n\t\tcase \"mute\":\n\t\t\tPlatformAPI.mute(cb);\n\t\t\tbreak;\n\t\tcase \"unmute\":\n\t\t\tPlatformAPI.unmute(cb);\n\t\t\tbreak;\n\t\tcase \"ghostShow\":\n\t\t\tPlatformAPI.ghostShow(cb);\n\t\t\tbreak;\n\t\tcase \"ghostHide\":\n\t\t\tPlatformAPI.ghostHide(cb);\n\t\t\tbreak;\n\t\tcase \"start\":\n\t\t\tif (!opt_data) {\n\t\t\t\tthrow \"Method _start missing params\";\n\t\t\t}\n\t\t\tPlatformAPI.start(opt_data, cb);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tif (!_core.core.isSilentModeEnabled()) {\n\t\t\t\tconsole.error(\"Unknown method call\");\n\t\t\t}\n\t}\n};\n\n/**\n * @class MobileBridge\n * @requires PlatformBridge\n *\n */\nfunction MobileBridge(device) {\n\tthis.device = device;\n\tPostMessageBridge.call(this);\n\tthis.platform = \"mobile\";\n}\n\nMobileBridge.prototype = Object.create(PostMessageBridge.prototype);\nMobileBridge.prototype.constructor = MobileBridge;\n\nMobileBridge.prototype._init = function () {\n\tPostMessageBridge.prototype._init.call(this);\n\tif (this.device === \"ios\") {\n\t\tthis._gameeWin = webkit.messageHandlers.callbackHandler;\n\t} else if (this.device === \"android\") {\n\t\tthis._gameeWin = _toDevice;\n\t} else {\n\t\tthrow \"Unknown device used in webkit bridge\";\n\t}\n\n\twindow._triggerMessage = function (data) {\n\t\ttry {\n\t\t\tdata = JSON.parse(data); // message is custom message from IOS/android platform\n\t\t} catch (err) {\n\t\t\tthrow \"Couldn't parse message from native app: \\n\" + data + \"\\n\" + err;\n\t\t}\n\t\tif (!_core.core.isSilentModeEnabled()) {\n\t\t\tconsole.log(JSON.stringify(data, null, 4));\n\t\t}\n\t\tthis.dispatchEvent(new CustomEvent(\"message\", { detail: data }));\n\t}.bind(window);\n};\n\nMobileBridge.prototype.doCall = function (preparedObject, requestData) {\n\tif ((typeof requestData === 'undefined' ? 'undefined' : _typeof(requestData)) === \"object\") {\n\t\tpreparedObject.request.data = requestData || {};\n\t}\n\n\tif (this.device === \"android\") // stringify data for android devices, but not for ios\n\t\tpreparedObject = JSON.stringify(preparedObject);\n\n\tthis._gameeWin.postMessage(preparedObject, \"*\");\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar BulletClass = function BulletClass() {\n    var _self = this,\n        _events = {};\n\n    _self.on = function (event, fn, once) {\n        if (arguments.length < 2 || typeof event !== \"string\" || typeof fn !== \"function\") return;\n\n        var fnString = fn.toString();\n\n        // if the named event object already exists in the dictionary...\n        if (typeof _events[event] !== \"undefined\") {\n            // add a callback object to the named event object if one doesn't already exist.\n            if (typeof _events[event].callbacks[fnString] === \"undefined\") {\n                _events[event].callbacks[fnString] = {\n                    cb: fn,\n                    once: !!once\n                };\n            } else if (typeof once === \"boolean\") {\n                // the function already exists, so update it's 'once' value.\n                _events[event].callbacks[fnString].once = once;\n            }\n        } else {\n            // create a new event object in the dictionary with the specified name and callback.\n            _events[event] = {\n                callbacks: {}\n            };\n\n            _events[event].callbacks[fnString] = { cb: fn, once: !!once };\n        }\n    };\n\n    _self.once = function (event, fn) {\n        _self.on(event, fn, true);\n    };\n\n    _self.off = function (event, fn) {\n        if (typeof event !== \"string\" || typeof _events[event] === \"undefined\") return;\n\n        // remove just the function, if passed as a parameter and in the dictionary.\n        if (typeof fn === \"function\") {\n            var fnString = fn.toString(),\n                fnToRemove = _events[event].callbacks[fnString];\n\n            if (typeof fnToRemove !== \"undefined\") {\n                // delete the callback object from the dictionary.\n                delete _events[event].callbacks[fnString];\n            }\n        } else {\n            // delete all functions in the dictionary that are\n            // registered to this event by deleting the named event object.\n            delete _events[event];\n        }\n    };\n\n    _self.trigger = function (event, data) {\n        if (typeof event !== \"string\" || typeof _events[event] === \"undefined\") return;\n\n        for (var fnString in _events[event].callbacks) {\n            var callbackObject = _events[event].callbacks[fnString];\n\n            if (typeof callbackObject.cb === \"function\") callbackObject.cb(data);\n            if (typeof callbackObject.once === \"boolean\" && callbackObject.once === true) _self.off(event, callbackObject.cb);\n        }\n    };\n};\n\nvar Bullet = exports.Bullet = new BulletClass();\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.BulletClass = undefined;\nexports.Button = Button;\nexports.Controller = Controller;\nexports.OneButtonController = OneButtonController;\nexports.TwoButtonController = TwoButtonController;\nexports.TwoActionButtonsController = TwoActionButtonsController;\nexports.FourButtonController = FourButtonController;\nexports.FiveButtonController = FiveButtonController;\nexports.SixButtonController = SixButtonController;\nexports.TwoArrowsOneButtonController = TwoArrowsOneButtonController;\nexports.TwoArrowsTwoButtonsController = TwoArrowsTwoButtonsController;\nexports.FourArrowController = FourArrowController;\nexports.TouchController = TouchController;\nexports.JoystickController = JoystickController;\nexports.JoystickButtonController = JoystickButtonController;\n\nvar _bullet = __webpack_require__(4);\n\n/**\n * @module game_controllers\n */\n\n/** ## Bullet\n *\n * [Bullet.js](https://github.com/munkychop/bullet) is used as pub/sub\n * library.\n *\n * The controller and its buttons are instance of Bullet.\n */\nvar BulletClass = exports.BulletClass = _bullet.Bullet.constructor;\n\n/** ## Button\n *\n * Represenation of a controller button. It is a child of\n * [Bullet](https://github.com/munkychop/bullet), so you can\n * subscribe for events triggered on it.\n *\n * @class Button\n * @param {String} key name of the button\n * @param {Number} keyCode keycode for the key to represent the button\n * on keyboard\n */\nfunction Button(key, keyCode) {\n\tvar self = this;\n\n\tBulletClass.call(this);\n\n\tthis._pressed = true;\n\n\tthis.key = key;\n\tthis.keyCode = keyCode;\n\n\tthis.on('keydown', function () {\n\t\tself._pressed = true;\n\t});\n\n\tthis.on('keyup', function () {\n\t\tself._pressed = false;\n\t});\n}\n\nButton.prototype = Object.create(BulletClass.constructor.prototype);\nButton.constructor = Button;\n\n/** ### isDown\n *\n * Ask if the button is currently pressed.\n *\n * @return {Boolean} true if the button is currently pressed\n */\nButton.prototype.isDown = function () {\n\treturn this._pressed;\n};\n\n/** ## Controller\n *\n * Controller has a collection of [buttons](#buttons).\n * It is a child of\n * [Bullet](https://github.com/munkychop/bullet), so you can\n * subscribe for events triggered on it.\n *\n * Controllers will get all the events for its buttons so you can\n * listen for them globaly from controller or individualy on every\n * button.\n *\n * ```javascript\n * controller.on('keydown', function(data) {\n *   console.log('button ' + data.button + ' is pressed');\n * });\n *\n * controller.buttons.left.on('keydown', function() {\n *   console.log('button left is pressed');\n * });\n * ```\n *\n * @class Controller\n */\nfunction Controller() {\n\tvar self = this;\n\n\tBulletClass.call(this);\n\n\t// ### buttons\n\t//\n\t// Map of controller's [buttons](#button) by their name.\n\t//\n\t// ```javascript\n\t// controller.buttons.left // Button('left', ..)\n\t// ```\n\tthis.buttons = {};\n\n\t// ### buttonAlias\n\t//\n\t// Map of remapped buttons.\n\t//\n\t// *see [remapButton](#remapbutton) for more info*\n\t//\n\tthis.buttonAlias = {};\n\n\t// Events prefixed with *$* are private, sent from GameeApp ment\n\t// to be handled before resended as *public (non-prefixed)*\n\t// event.\n\t//\n\t// They should be not used in games as they can change in the future.\n\tthis.on('$keydown', function (data) {\n\t\tif (data.button && self.buttonAlias[data.button]) {\n\t\t\tdata.button = self.buttonAlias[data.button];\n\t\t}\n\n\t\tself.trigger('keydown', data);\n\t});\n\n\tthis.on('$keyup', function (data) {\n\t\tif (data.button && self.buttonAlias[data.button]) {\n\t\t\tdata.button = self.buttonAlias[data.button];\n\t\t}\n\n\t\tself.trigger('keyup', data);\n\t});\n\n\t// By default GameeApp will trigger *keydown* and *keyup* events for\n\t// the controller for every button presses/released.\n\t//\n\t// The controller then handles the event and triggers the event for\n\t// the coresponding button.\n\t//\n\t// It expexts a `data` argument which should have a property `button`\n\t// with the name of button.\n\tthis.on('keydown', function (data) {\n\t\tif (!data.button || !self.buttons[data.button]) {\n\t\t\treturn;\n\t\t}\n\n\t\tself.buttons[data.button].trigger('keydown');\n\t});\n\n\tthis.on('keyup', function (data) {\n\t\tif (!data.button || !self.buttons[data.button]) {\n\t\t\treturn;\n\t\t}\n\n\t\tself.buttons[data.button].trigger('keyup');\n\t});\n}\n\nController.prototype = Object.create(BulletClass.constructor.prototype);\nController.constructor = Controller;\n\n/** ### addButton\n *\n * Add button to the controller.\n *\n * @param {Button} button a [Button](#button) instance\n */\nController.prototype.addButton = function (button) {\n\tthis.buttons[button.key] = button;\n};\n\n/** ### enableKeyboard\n *\n * Enable keyboard controlls. It will attach event listeners to the\n * *window* object for every button and trigger their *keydown* /\n * *keyup* event for the controller.\n */\nController.prototype.enableKeyboard = function (gamee) {\n\tvar key,\n\t    button,\n\t    keyCodes = {},\n\t    self = this;\n\n\tfor (key in this.buttons) {\n\t\tbutton = this.buttons[key];\n\n\t\tif (button.keyCode) {\n\t\t\tkeyCodes[button.keyCode] = button;\n\t\t}\n\t}\n\n\tgamee._keydown(function (ev) {\n\t\tvar button = keyCodes[ev.keyCode];\n\n\t\tif (!button) {\n\t\t\treturn;\n\t\t}\n\n\t\tev.preventDefault();\n\t\tself.trigger('keydown', { button: button.key });\n\t});\n\n\tgamee._keyup(function (ev) {\n\t\tvar button = keyCodes[ev.keyCode];\n\n\t\tif (!button) {\n\t\t\treturn;\n\t\t}\n\n\t\tev.preventDefault();\n\t\tself.trigger('keyup', { button: button.key });\n\t});\n};\n\n/** ### remapButton\n *\n * Remap the names of the controller's buttons. Controllers have their\n * button names set (left, right, A, B), but sometimes in context of\n * the game a different names are desired.\n *\n * ```javascript\n * var controller = gamee.controller.requestController('TwoButtons');\n * controller.remapButton('left', 'throttle');\n * controller.remapButton('right', 'break');\n *\n * controller.buttons.throttle.on('keydown', ..);\n * ```\n *\n * @param {String} oldName button name we want to change\n * @param {String} newName new button name\n */\nController.prototype.remapButton = function (oldName, newName) {\n\n\t// handle old code\n\tif (newName.name) {\n\t\tnewName = newName.name;\n\t}\n\n\tif (this.buttons[oldName]) {\n\t\tthis.buttonAlias[oldName] = newName.name;\n\n\t\tthis.buttons[newName.name] = this.buttons[oldName];\n\n\t\tdelete this.buttons[oldName];\n\t} else {\n\t\tthrow Error('Button ' + oldName + ' was not found in controller');\n\t}\n};\n\n// ## Controllers\n\n/** ### OneButtonController\n *\n * Controller with only one button.\n * @class OneButtonController\n */\nfunction OneButtonController() {\n\tController.call(this);\n\n\t// * __name__: 'button'\n\t// * __key__: spacebar\n\tthis.addButton(new Button('button', 32));\n}\nOneButtonController.prototype = Object.create(Controller.prototype);\nOneButtonController.prototype.constructor = OneButtonController;\n\n/** ### TwoButtonController\n *\n * Controller with two buttons\n * @class TwoButtonController\n */\nfunction TwoButtonController() {\n\tController.call(this);\n\n\t// * __name__: 'left'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('left', 37));\n\n\t// * __name__: 'right'\n\t// * __key__: righ arrow\n\tthis.addButton(new Button('right', 39));\n}\nTwoButtonController.prototype = Object.create(Controller.prototype);\nTwoButtonController.prototype.constructor = TwoButtonController;\n\n/** ### TwoActionButtonsController\n *\n * Controller with two action buttons (A,B)\n * @class TwoActionButtonsController\n */\nfunction TwoActionButtonsController() {\n\tController.call(this);\n\n\t// * __name__: 'left'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('A', 32));\n\n\t// * __name__: 'right'\n\t// * __key__: righ arrow\n\tthis.addButton(new Button('B', 17));\n}\nTwoActionButtonsController.prototype = Object.create(Controller.prototype);\nTwoActionButtonsController.prototype.constructor = TwoActionButtonsController;\n\n/** ### FourButtonController\n *\n * Controller with four buttons\n * @class FourButtonController\n */\nfunction FourButtonController() {\n\tController.call(this);\n\n\t// * __name__: 'up'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('up', 38));\n\n\t// * __name__: 'left'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('left', 37));\n\n\t// * __name__: 'right'\n\t// * __key__: righ arrow\n\tthis.addButton(new Button('right', 39));\n\n\t// * __name__: 'A'\n\t// * __key__: spacebar\n\tthis.addButton(new Button('A', 32));\n}\nFourButtonController.prototype = Object.create(Controller.prototype);\nFourButtonController.prototype.constructor = FourButtonController;\n\n/** ### FiveButtonController\n *\n * Controller with five buttons\n * @class FiveButtonController\n */\nfunction FiveButtonController() {\n\tController.call(this);\n\n\t// * __name__: 'up'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('up', 38));\n\n\t// * __name__: 'left'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('left', 37));\n\n\t// * __name__: 'right'\n\t// * __key__: righ arrow\n\tthis.addButton(new Button('right', 39));\n\n\t// * __name__: 'down'\n\t// * __key__: down arrow\n\tthis.addButton(new Button('down', 40));\n\n\t// * __name__: 'A'\n\t// * __key__: spacebar\n\tthis.addButton(new Button('A', 32));\n}\nFiveButtonController.prototype = Object.create(Controller.prototype);\nFiveButtonController.prototype.constructor = FiveButtonController;\n\n/** ### SixButtonController\n *\n * Controller with six buttons\n * @class SixButtonController\n */\nfunction SixButtonController() {\n\tController.call(this);\n\n\t// * __name__: 'up'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('up', 38));\n\n\t// * __name__: 'left'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('left', 37));\n\n\t// * __name__: 'right'\n\t// * __key__: righ arrow\n\tthis.addButton(new Button('right', 39));\n\n\t// * __name__: 'down'\n\t// * __key__: down arrow\n\tthis.addButton(new Button('down', 40));\n\n\t// * __name__: 'A'\n\t// * __key__: spacebar\n\tthis.addButton(new Button('A', 32));\n\n\t// * __name__: 'B'\n\t// * __key__: ctrl\n\tthis.addButton(new Button('B', 17));\n}\nSixButtonController.prototype = Object.create(Controller.prototype);\nSixButtonController.prototype.constructor = SixButtonController;\n\n/** ### TwoArrowsOneButtonController\n *\n * Controller with two arrows and one action button\n * @class TwoArrowsOneButtonController\n */\nfunction TwoArrowsOneButtonController() {\n\tController.call(this);\n\n\t// * __name__: 'left'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('left', 37));\n\n\t// * __name__: 'right'\n\t// * __key__: righ arrow\n\tthis.addButton(new Button('right', 39));\n\n\t// * __name__: 'A'\n\t// * __key__: spacebar\n\tthis.addButton(new Button('A', 32));\n}\nTwoArrowsOneButtonController.prototype = Object.create(Controller.prototype);\nTwoArrowsOneButtonController.prototype.constructor = TwoArrowsOneButtonController;\n\n/** ### TwoArrowsTwoButtonsController\n *\n * Controller with two arrows and two action buttons\n * @class TwoArrowsTwoButtonsController\n */\nfunction TwoArrowsTwoButtonsController() {\n\tController.call(this);\n\n\t// * __name__: 'left'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('left', 37));\n\n\t// * __name__: 'right'\n\t// * __key__: righ arrow\n\tthis.addButton(new Button('right', 39));\n\n\t// * __name__: 'A'\n\t// * __key__: spacebar\n\tthis.addButton(new Button('A', 32));\n\n\t// * __name__: 'B'\n\t// * __key__: ctrl\n\tthis.addButton(new Button('B', 17));\n}\nTwoArrowsTwoButtonsController.prototype = Object.create(Controller.prototype);\nTwoArrowsTwoButtonsController.prototype.constructor = TwoArrowsTwoButtonsController;\n\n/** ### FourArrowController\n *\n * Controller with four arrow buttons\n * @class FourArrowController\n */\nfunction FourArrowController() {\n\tController.call(this);\n\n\t// * __name__: 'up'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('up', 38));\n\n\t// * __name__: 'left'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('left', 37));\n\n\t// * __name__: 'right'\n\t// * __key__: righ arrow\n\tthis.addButton(new Button('right', 39));\n\n\t// * __name__: 'down'\n\t// * __key__: down arrow\n\tthis.addButton(new Button('down', 40));\n}\nFourArrowController.prototype = Object.create(Controller.prototype);\nFourArrowController.prototype.constructor = FourArrowController;\n\n/** ### TouchController\n *\n * This controller has no buttons. Instead it has a touchpad which\n * triggers *touchstart*, *touchend*, *touchmove*, *touchcancel*,\n * *touchend* events (similar to\n * [Touch event types](https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent#Touch_event_types))\n *\n * The position of the touch is in the `data.position` argument as a\n * *x* and *y* with the values between [0, 0] for the left top corner\n * and [1, 1] for the bottom right corner ([0.5, 0.5] is the center).\n *\n * ```javascript\n * controller = gamee.controller.requestController('Touch');\n *\n * controller.on('touchstart', function(data) {\n *\tif (data.position.x < 0.5 && data.position.y < 0.5) {\n *    console.log('touch in the top left quadrant');\n *  }\n * })\n * ```\n * @class TouchController\n */\nfunction TouchController() {\n\tvar self = this;\n\n\tController.call(this);\n\n\tthis.on(\"$touchstart\", function (data) {\n\t\tself.trigger('touchstart', data);\n\t});\n\n\tthis.on(\"$touchend\", function (data) {\n\t\tself.trigger('touchend', data);\n\t});\n\n\tthis.on(\"$touchmove\", function (data) {\n\t\tself.trigger('touchmove', data);\n\t});\n\n\tthis.on(\"$touchleave\", function (data) {\n\t\tself.trigger('touchleave', data);\n\t});\n\n\tthis.on(\"$touchcancel\", function (data) {\n\t\tself.trigger('touchcancel', data);\n\t});\n}\nTouchController.prototype = Object.create(TouchController.prototype);\nTouchController.prototype.constructor = TouchController;\n\n/** ### JoystickController\n *\n * JoystickController emits `change` event, after the position of the\n * joystick is changed.\n *\n * The position of the joystick is in the property `x` and `y`. The\n * position on axis is between <-1, 1> (for x -1 is max left\n * position, 1 max right position). [0.0, 0.0] is the center.\n *\n * ```javascript\n * joystick = gamee.controller.requestController('Joystick');\n *\n * joystick.on('change', function() {\n *   new_x = joystick.x;\n *   nex_y = joystick.y;\n * })\n * ```\n * @class JoystickController\n */\nfunction JoystickController() {\n\tvar self = this;\n\n\tController.call(this);\n\n\t// x axis\n\tthis.x = 0;\n\t// y axis\n\tthis.y = 0;\n\n\tthis.on(\"$change\", function (data) {\n\t\tself.x = data.position.x;\n\t\tself.y = data.position.y;\n\n\t\tself.trigger(\"change\", data);\n\t});\n}\nJoystickController.prototype = Object.create(Controller.prototype);\nJoystickController.prototype.constructor = JoystickController;\n\n/** ### JoystickButtonController\n *\n * JoystickButtonController is a `JoystickController` with one button.\n *\n * ```javascript\n * joystick = gamee.controller.requestController('JoystickWithButton');\n *\n * joystick.on('change', function() {\n *   new_x = joystick.x;\n *   nex_y = joystick.y;\n * })\n *\n * joystick.buttons.button.on('keydown', callback)\n * // or simply\n * joystick.on('keydown', callback)\n * ```\n * @class JoystickButtonController\n */\nfunction JoystickButtonController() {\n\tvar self = this;\n\n\tJoystickController.call(this);\n\n\t// * __name__: 'button'\n\t// * __key__: spacebar\n\tthis.addButton(new Button('button', 32));\n}\nJoystickButtonController.prototype = Object.create(JoystickController.prototype);\nJoystickButtonController.prototype.constructor = JoystickButtonController;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.gamee = undefined;\n\n__webpack_require__(0);\n\nvar _gameeAPI = __webpack_require__(2);\n\nvar _core = __webpack_require__(1);\n\nvar _platform_bridge = __webpack_require__(3);\n\n/**\n * Instance of gamee object with API for developers.\n * Internal functions becomes private this way\n *\n * @requires Gamee\n */\nvar gamee = exports.gamee = undefined;\n\n/**\n * Resolves what platform is being used and make instance of platform API.\n *\n * @requires PlatformBridge\n */\nvar platformBridge = function () {\n\n    var platformBridge,\n        platformType = \"web\";\n\n    // Reslove Gamee enviroment\n    /* current user agent */\n    var userAgent = navigator.userAgent.toLowerCase();\n\n    if (/iphone|ipod|ipad/.test(userAgent)) {\n        // test ios device\n        // user agent is use to determine current enviroment\n\n        // Test if window with game have a parent (loading in iframe)\n        if (window.self !== window.top) {\n            platformType = \"web\";\n        } else {\n            platformType = \"ios\";\n        }\n    } else if (/gamee\\/[0-9\\.]+$/.test(userAgent)) {\n        // test android app\n        // TODO do you really test android like that?\n        platformType = \"android\";\n    } else if (window.parent) {\n        // TODO doesnt make sence, parent always exists!!\n        platformType = \"web\";\n    } else if (window.parent && window.parent.gameeSimulator) {\n        // TODO doesnt make sence, parent always exist?\n        platformType = \"web\";\n    }\n\n    exports.gamee = gamee = new _gameeAPI.Gamee(platformType);\n\n    window.gamee = gamee;\n\n    switch (platformType) {\n        case \"web\":\n            if (window.parent === window) {\n                console.error(\"Gamee must run in iframe on web platform\");\n            }\n            platformBridge = new _platform_bridge.PostMessageBridge(window.parent);\n            break;\n        case \"ios\":\n            platformBridge = new _platform_bridge.MobileBridge(\"ios\");\n            break;\n        case \"android\":\n            platformBridge = new _platform_bridge.MobileBridge(\"android\");\n            break;\n        default:\n            throw \"Can't identify the platform\";\n    }\n    return platformBridge;\n}();\n\n_core.core.PlatformAPI = _platform_bridge.PlatformAPI;\n_core.core.native = platformBridge;\n\n_platform_bridge.PlatformAPI.emitter = gamee.emitter;\n\nfunction loadScript(url, callback) {\n    // Adding the script tag to the head as suggested before\n    var head = document.getElementsByTagName('head')[0];\n    var script = document.createElement('script');\n    script.src = url;\n\n    // Then bind the event to the callback function.\n    // There are several events for cross browser compatibility.\n    script.onreadystatechange = callback;\n    script.onload = callback;\n\n    // Fire the loading\n    head.appendChild(script);\n}\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// gamee-js.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e3344513ac420d153d79","/**\n * @class CustomEvent\n */\n(function shimCustomEvent() {\n\ttry {\n\t\tvar ce = new window.CustomEvent('test');\n\t\tce.preventDefault();\n\t\tif (ce.defaultPrevented !== true) {\n\t\t\t// IE has problems with .preventDefault() on custom events\n\t\t\t// http://stackoverflow.com/questions/23349191\n\t\t\tthrow new Error('Could not prevent default');\n\t\t}\n\t} catch (e) {\n\t\tvar CustomEvent = function (event, params) {\n\t\t\tvar evt, origPrevent;\n\t\t\tparams = params || {\n\t\t\t\tbubbles: false,\n\t\t\t\tcancelable: false,\n\t\t\t\tdetail: undefined\n\t\t\t};\n\n\t\t\tevt = document.createEvent(\"CustomEvent\");\n\t\t\tevt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n\t\t\torigPrevent = evt.preventDefault;\n\t\t\tevt.preventDefault = function () {\n\t\t\t\torigPrevent.call(this);\n\t\t\t\ttry {\n\t\t\t\t\tObject.defineProperty(this, 'defaultPrevented', {\n\t\t\t\t\t\tget: function () {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthis.defaultPrevented = true;\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn evt;\n\t\t};\n\n\t\tCustomEvent.prototype = window.Event.prototype;\n\t\twindow.CustomEvent = CustomEvent; // expose definition to window\n\t}\n})();\n\n//addEventListener polyfill 1.0 / Eirik Backer / MIT Licence\n(function (win, doc) {\n\tif (win.addEventListener) return;\t\t//No need to polyfill\n\n\tfunction docHijack(p) { var old = doc[p]; doc[p] = function (v) { return addListen(old(v)); }; }\n\tfunction addEvent(on, fn, self) {\n\t\treturn (self = this).attachEvent('on' + on, function (e) {\n\t\t\te = e || win.event;\n\t\t\te.preventDefault = e.preventDefault || function () { e.returnValue = false; };\n\t\t\te.stopPropagation = e.stopPropagation || function () { e.cancelBubble = true; };\n\t\t\tfn.call(self, e);\n\t\t});\n\t}\n\tfunction addListen(obj, i) {\n\t\ti = obj.length;\n\t\tif (i) {\n\t\t\twhile (i--)\n\t\t\t\tobj[i].addEventListener = addEvent;\n\t\t} else {\n\t\t\tobj.addEventListener = addEvent;\n\t\t}\n\t\treturn obj;\n\t}\n\n\taddListen([doc, win]);\n\tif ('Element' in win) win.Element.prototype.addEventListener = addEvent;\t\t\t//IE8\n\telse {\t\t//IE < 8\n\t\tdoc.attachEvent('onreadystatechange', function () { addListen(doc.all); });\t\t//Make sure we also init at domReady\n\t\tdocHijack('getElementsByTagName');\n\t\tdocHijack('getElementById');\n\t\tdocHijack('createElement');\n\t\taddListen(doc.all);\n\t}\n})(window, document);\n\n// naomik event emiter http://stackoverflow.com/a/24216547/1866147\n// usage:\n// function Example() {\n// \tCustomEmitter.call(this);\n// }\n\n// // run it\n// var e = new Example();\n\n// e.addEventListener(\"something\", function (event) {\n// \tconsole.log(event)\n// });\n\n// e.dispatchEvent(new Event(\"something\"));\nexport function CustomEmitter() {\n\tvar eventTarget = document.createDocumentFragment();\n\n\tfunction delegate(method) {\n\t\tthis[method] = eventTarget[method].bind(eventTarget);\n\t}\n\n\t[\n\t\t\"addEventListener\",\n\t\t\"dispatchEvent\",\n\t\t\"removeEventListener\"\n\t].forEach(delegate, this);\n}\n\n/** ### wrapKeyEvent \n * \n * Handle old IE event differences for key events\n * \n * @param {Function} fn callback\n */\nexport function wrapKeyEvent(fn) {\n\treturn function (ev) {\n\t\tif (!ev || !ev.keyCode) {\n\t\t\tif (!ev) {\n\t\t\t\tev = window.event;\n\t\t\t}\n\n\t\t\tif (ev.which) {\n\t\t\t\tev.keyCode = ev.which;\n\t\t\t}\n\t\t}\n\n\t\treturn fn(ev);\n\t};\n}\n\n\n// WEBPACK FOOTER //\n// ./gamee/libs/shims.js","import * as controllers from \"./game_controllers.js\"\nimport { wrapKeyEvent } from \"../libs/shims.js\"\n\n// unlock audio\n// overrides native AudioContext & webkitAudioContext\n(function () {\n    // this works as a constructor\n    var overloadedAudioContext = function (type) {\n        var ctx = new type();\n\n        // add audio resume to function on touchstart\n        if (ctx.state === 'suspended') {\n\n            var resume = function () {\n\n                // Check if hack is necessary. Only occurs in iOS6+ devices\n                // and only when you first boot the iPhone, or play a audio/video\n                // with a different sample rate\n                if (/(iPhone|iPad)/i.test(navigator.userAgent)) {\n                    var buffer = ctx.createBuffer(1, 1, 44100);\n                    var dummy = ctx.createBufferSource();\n                    dummy.buffer = buffer;\n                    dummy.connect(ctx.destination);\n                    dummy.start(0);\n                    dummy.disconnect();\n                }\n\n                ctx.resume();\n                setTimeout(function () {\n                    if (ctx.state === 'running') {\n                        document.body.removeEventListener([\n                            'touchcancel',\n                            'touchend',\n                            'touchenter',\n                            'touchleave',\n                            'touchmove',\n                            'touchstart',\n                            'mouseenter',\n                            'mouseover',\n                            'mousemove',\n                            'mousedown',\n                            'mouseup'\n                        ].join(\" \"), resume, false);\n                    }\n                }, 0);\n            };\n\n            // only touchend will work, but hey, we tried...\n            // https://github.com/WebAudio/web-audio-api/issues/836\n            // https://www.chromestatus.com/feature/6406908126691328\n            document.body.addEventListener([\n                'touchcancel',\n                'touchend',\n                'touchenter',\n                'touchleave',\n                'touchmove',\n                'touchstart',\n                'mouseenter',\n                'mouseover',\n                'mousemove',\n                'mousedown',\n                'mouseup'\n            ].join(\" \"),\n                resume, false);\n        }\n        // allowed in JS to return different type of the object in the constructor\n        return ctx\n    };\n\n    try {\n        if (typeof window.AudioContext !== 'undefined') {\n            window.AudioContext = overloadedAudioContext.bind(null, window.AudioContext);\n        } else if (typeof webkitAudioContext !== 'undefined') {\n            window.webkitAudioContext = overloadedAudioContext.bind(null, window.webkitAudioContext);\n        }\n    } catch (e) { // throw error in async part\n        setTimeout(() => {\n            throw e;\n        }, 0)\n    }\n})();\n\n\n/**\n * @class core\n */\nexport var core = (function () {\n\n    // # Gamee.js\n    //\n    // This file defines and expose a public API for games to communicate\n    // with Gamee*.\n    //\n    // Also it handles some requirements when Gamee is run in an desktop\n    // environment.\n    //\n    // \\* _later in the document Gamee will be referred as GameeApp to not\n    // be mistaken for word game_\n    //\n    // ** _GameeWebApp will refer to Gamee which is running in a desktop\n    // browser_\n\n    /** an empty function */\n    var noop = function () { };\n\n    var cache = {};\n\n    /** internal variables/constants (uppercase) coupled inside separate object for potential easy referencing */\n    var internals = {\n        VERSION: \"2.4.1\", // version of the gamee library\n        CAPABILITIES: [\"ghostMode\", \"saveState\", \"replay\", \"socialData\",\"rewardedAds\",\"coins\",\"logEvents\",\"playerData\",\"share\", \"gems\"], // supported capabilities\n        variant: 0, // for automating communication with server\n        soundUnlocked: false,\n        onReady: noop, // for intercepting real onReady because of behind the scenes variant handling\n        onGameStart: noop // for intercepting real onGameStart because of unlocking sound\n    };\n\n    /** ## gamee\n     *\n     * GameeApp interface for games. It is exposed as a `gamee` global\n     * object and games should only use its public methods and\n     * properties to communicate with the GameeApp.\n     *\n     * _There is also [$gameeNative](gamee_native.js.html) global object\n     * which handles internal parts of the communication._\n     */\n    var core = {};\n\n    //\n    // ## Signaling game state\n    //\n    // The game should signal the GameeApp its status (playing/game-over)\n    // and current score.\n    //\n\n    /** ### gamee.gameeInit\n     *\n     * Must be called first before any other gamee calls\n     * returns controller object the same way requestController did previously\n     * ctrlType/ctrlOpts - requested control type + options\n     * capabilities -> array of strings representing supported features:\n     * after the initialization onReady is invoked and after that game can use the api\n     */\n    core.gameeInit = function (ctrlType, ctrlOpts, capabilities, cb, silentMode = false) {\n        // let's validate the array here, so that all backends can benefit from it\n        var allOk = true, cap = {};\n        if ((capabilities !== undefined) && (Array.isArray(capabilities))) {\n            for (var i = 0; i < capabilities.length; i++) {\n                if ((typeof capabilities[i] !== \"string\") ||\n                    (internals.CAPABILITIES.indexOf(capabilities[i]) === -1)) allOk = false;\n                cap[capabilities[i]] = true;\n            }\n        } else allOk = false;\n\n        if (!allOk)\n            throw \"Capabilities array passed to gameeInit is void, malformed or unsupported capabilites requested.\";\n        // TODO remove\n        // gameeNative.gameeInit(core, internals.VERSION, ctrlType, allOk ? capabilities : []);\n\n        this.native.createRequest(\"init\", {\n            version: internals.VERSION,\n            controller: ctrlType,\n            capabilities: cap\n        }, function (responseData) {\n            // remember capabilities of the game\n            cache.capabilities = cap;\n            //\n            // // Mute gamee-js console output\n            // cache.silentMode = silentMode;\n\n            // might fail if controller of this type doesnt exist\n            var error = null;\n            try {\n                if (this.native.platform === \"web\") {\n                    responseData.controller = core.controller.requestController(ctrlType, { enableKeyboard: true });\n                    this._bindKeyboardTriggers(responseData.controller);\n                } else {\n                    responseData.controller = core.controller.requestController(ctrlType, {});\n                }\n            } catch (err) {\n                error = err;\n            }\n\n            cb(error, responseData);\n        }.bind(this));\n        // TODO remove\n        // return core.controller.requestController(ctrlType, ctrlOpts);\n    };\n\n    core._bindKeyboardTriggers = function (controller) {\n        global.addEventListener('message', function (ev) {\n            switch (ev.data[0]) {\n                case 'button_button_down':\n                    controller.trigger(\"keydown\", { button: \"button\" });\n                    break;\n\n                case 'button_button_up':\n                    controller.trigger(\"keyup\", { button: \"button\" });\n                    break;\n\n                case 'button_left_up':\n                    controller.trigger(\"keyup\", { button: \"left\" });\n                    break;\n\n                case 'button_left_down':\n                    controller.trigger(\"keydown\", { button: \"left\" });\n                    break;\n\n                case 'button_right_down':\n                    controller.trigger(\"keydown\", { button: \"right\" });\n                    break;\n\n                case 'button_right_up':\n                    controller.trigger(\"keyup\", { button: \"right\" });\n                    break;\n\n                case 'button_up_down':\n                    controller.trigger(\"keydown\", { button: \"up\" });\n                    break;\n\n                case 'button_up_up':\n                    controller.trigger(\"keyup\", { button: \"up\" });\n                    break;\n\n                case 'button_down_down':\n                    controller.trigger(\"keydown\", { button: \"down\" });\n                    break;\n\n                case 'button_down_up':\n                    controller.trigger(\"keyup\", { button: \"down\" });\n                    break;\n\n                case 'button_a_down':\n                    controller.trigger(\"keydown\", { button: \"A\" });\n                    break;\n\n                case 'button_a_up':\n                    controller.trigger(\"keyup\", { button: \"A\" });\n                    break;\n\n                case 'button_b_down':\n                    controller.trigger(\"keydown\", { button: \"B\" });\n                    break;\n\n                case 'button_b_up':\n                    controller.trigger(\"keyup\", { button: \"B\" });\n                    break;\n            }\n        });\n    };\n\n    /** ### gamee.gameLoadingProgress\n     *\n     * Indicates how much content is already loaded in %.\n     */\n    core.gameLoadingProgress = (function () {\n        var percentageSoFar = 0;\n\n        return function (percentage) {\n            if ((typeof percentage !== \"number\") || (percentage < 0) || (percentage > 100))\n                throw \"Percentage passed to gameLoadingProgress out of bounds or not a number.\";\n            else if (percentage > percentageSoFar) {\n                percentageSoFar = percentage;\n                this.native.createRequest(\"gameLoadingProgress\", { percentage: percentage });\n            }\n        };\n    })();\n\n\n    /** ### gamee.gameReady\n     *\n     * Notifies platform game can accept start command.\n     */\n    core.gameReady = function () {\n        this.native.createRequest(\"gameReady\");\n    };\n\n    /** ### gamee.gameStart\n     *\n     * Indicates that game is ready to be started (even after restart).\n     */\n    // core.gameStart = function () {\n    //     gameeNative.gameLoadingProgress(100); // FB requires this\n    //     gameeNative.gameStart(gamee);\n    // };\n\n    /** ### gamee.updateScore\n     *\n     * sends score to UI\n     */\n    core.updateScore = function (score, opt_ghostSign) {\n        if (typeof score !== \"number\")\n            throw \"Score passed to updateScore is not a number.\";\n        var data = {\n            score: parseInt(score, 10)\n        };\n        if (opt_ghostSign) {\n            data.ghostSign = true;\n        }\n        this.native.createRequest(\"updateScore\", data);\n        // core.native.createRequest(method, requestData, callback);\n    };\n\n    /** ### gamee.gameOver\n     *\n     * Indicates the game has ended, the game is waiting for subsequent onGameStart.\n     * Data has the same format as data received in onReady callback.\n     * Data must be string = responsibility for turning data structure into string is left to the game!\n     */\n    core.gameOver = function (opt_replayData, opt_saveState, opt_hideOverlay) {\n        opt_hideOverlay = opt_hideOverlay !== undefined ? opt_hideOverlay : false;\n        // var allOk = ((data !== undefined) && (typeof data === \"string\")) || (data === undefined);\n        // if (!allOk) console.error(\"Data provided to gameOver function must be string.\");\n        // gameeNative.gameOver(gamee, internals.variant, allOk ? data : \"\");\n        var requestData = {};\n        if (opt_replayData) {\n            if (!opt_replayData.hasOwnProperty(\"variant\")) {\n                opt_replayData.variant = \"\";\n            }\n            if (!opt_replayData.hasOwnProperty(\"data\")) {\n                throw \"Replay data must have `data` property\";\n            }\n            requestData.replayData = opt_replayData;\n        }\n        requestData.hideOverlay = opt_hideOverlay;\n\n        if (opt_saveState) {\n            requestData.state = opt_saveState;\n        }\n\n        core.native.createRequest(\"gameOver\", requestData);\n    };\n\n    /** ### gamee.gameSave\n     *\n     * Player has requested saving current game's state\n     * data must be string = responsibility for turning data structure into string is left to game!\n     * share must be expression evaluating to either true or false; it indicates, whether the game progress should be shared on feed\n     */\n    core.gameSave = function (data, share) {\n\n        if(!cache.capabilities.saveState)\n            throw \"Save State not supported, you must add the capability on gamee.Init\";\n\n        core.native.createRequest(\"saveState\", { state: data, share: share });\n    };\n\n    core.requestSocial = function (cb,numberOfPlayers) {\n\n        if(!cache.capabilities.socialData)\n            throw \"Social Data not supported, you must add the capability on gamee.Init\";\n\n        this.native.createRequest(\"requestSocial\", numberOfPlayers, function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.logEvent = function (eventName, eventValue) {\n\n        if(!cache.capabilities.logEvents)\n            throw \"Log Events not supported, you must add the capability on gamee.Init\";\n\n        //var valuesToLogString = JSON.stringify(eventValue)\n\n        this.native.createRequest(\"logEvent\", {eventName,eventValue}, function (error){\n            if(error){\n                throw error\n            }\n        });\n\n    };\n\n    core.requestBattleData = function (cb) {\n        this.native.createRequest(\"requestBattleData\", undefined, function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.requestPlayerReplay = function (userID, cb) {\n\n        if(!cache.capabilities.replay)\n            throw \"Replays not supported, you must add the capability on gamee.Init\";\n\n        this.native.createRequest(\"requestPlayerReplay\", {userID}, function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.requestPlayerSaveState = function (userID, cb) {\n        this.native.createRequest(\"requestPlayerSaveState\", {userID}, function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.playerEnteredToGameRoom = function () {\n        this.native.createRequest('playerEnteredToGameRoom');\n    };\n\n    core.playerLeftGameRoom = function () {\n        this.native.createRequest('playerLeftGameRoom');\n    };\n\n    core.purchaseItemWithCoins = function (options, cb, oldMethod) {\n\n        if(!cache.capabilities.coins)\n            throw \"Coins purchases not supported, you must add the capability on gamee.Init\";\n\n        if (options) {\n            var propertiesList = [\"coinsCost\",\"itemName\"];\n            propertiesList.forEach(function (property){\n                if(!options.hasOwnProperty(property))\n                    throw \"Purchase Options must have `\"+property+\"` property\"\n            })\n        }\n\n        if (!this.isSilentModeEnabled()) {\n            console.log(options);\n        }\n\n        var method = \"purchaseItemWithCoins\";\n        if (oldMethod !== undefined && oldMethod === true) {\n            method = \"purchaseItem\";\n        }\n        this.native.createRequest(method, options, function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.purchaseItemWithGems = function (options, cb) {\n\n        if(!cache.capabilities.gems)\n            throw \"Gems purchases not supported, you must add the capability on gamee.Init\";\n\n        if (options) {\n            var propertiesList = [\"gemsCost\",\"itemName\"];\n            propertiesList.forEach(function (property){\n                if(!options.hasOwnProperty(property))\n                    throw \"Purchase options must have `\"+property+\"` property\"\n            })\n        }\n\n        if (!this.isSilentModeEnabled()) {\n            console.log(options);\n        }\n\n        this.native.createRequest(\"purchaseItemWithGems\", options, function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.share = function (options, cb) {\n\n        if(!cache.capabilities.share)\n            throw \"Share option not supported, you must add the capability on gamee.Init\";\n\n        if (options) {\n            var propertiesList = [\"destination\"];\n            propertiesList.forEach(function (property){\n                if(!options.hasOwnProperty(property))\n                    throw \"Share Options must have `\"+property+\"` property\";\n            })\n        }\n\n        if (!this.isSilentModeEnabled()) {\n            console.log(options);\n        }\n\n        this.native.createRequest(\"share\",options, function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.loadRewardedVideo = function (cb) {\n\n        if(!cache.capabilities.rewardedAds)\n            throw \"Rewarded Ads not supported, you must add the capability on gamee.Init\";\n\n        this.native.createRequest(\"loadRewardedVideo\", function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.showRewardedVideo = function (cb) {\n\n        if(!cache.capabilities.rewardedAds)\n            throw \"Rewarded Ads not supported, you must add the capability on gamee.Init\";\n\n        this.native.createRequest(\"showRewardedVideo\", function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.showSubscribeDialog = function (cb) {\n        this.native.createRequest(\"showSubscribeDialog\", function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.requestPlayerData = function (cb, userID) {\n\n        if(!cache.capabilities.playerData)\n            throw \"Player Data not supported, you must add the capability on gamee.Init\";\n\n        let options = undefined;\n        if (userID) {\n            options = {userID};\n        }\n\n        this.native.createRequest(\"requestPlayerData\", options, function (responseData) {\n            cb(null, responseData);\n        });\n    };\n\n    core.startSignal = function (data) {\n        var error;\n\n        if (data.replay && !cache.capabilities.replay)\n            error = \"Game doesn't support replay. \";\n\n        if (data.ghostMode && !cache.capabilities.ghostMode)\n            error = \"Game doesn't support ghost Mode. \";\n\n        return error;\n    };\n    //\n    // ## Private objects and methods\n    // These are internal objects in closed scope. Good to know about them\n    // when debugging.\n\n    //\n    // ## gamee.controller\n    //\n    // Namespace where the methods for controller are published.\n    //\n\n    /**\n     * TODO transform this into instance of gamee class\n     */\n    core.controller = {\n        /** ### mainController\n         *\n         * Current controller.\n         */\n        mainController: null,\n\n        /** ### requestController\n         *\n         * Factory method to create a controller. It creates the controller\n         * and signals to GameeApp which type the game requires\n         *\n         * You should called this method once before calling\n         * `gamee.gameStart()`.\n         *\n         * @param {String} type type of controller (see [controllerTypes](#controllertypes))\n         * @param {Object} [opts] optional controller options\n         * {'enableKeyboard': .., 'buttons': ...}\n         * @param {boolean} [opts.enableKeyboard] enable the keyboard\n         * @param {Object} [opts.buttons] remap buttons {'oldKey': 'newKey',\n         * 'left': 'break' ..}\n         */\n        requestController: function (type, opts) {\n            if (type === \"FullScreen\")\n                return null;\n\n            var controller = createController(type, opts);\n\n            this.mainController = controller;\n\n            return controller;\n        },\n\n        /** ### additionalController\n         *\n         * Construct an additional controller. Sometimes games require a\n         * different controller depending on platform (eg. touch on mobile,\n         e but Four Buttons on desktop)\n         *\n         * **This is currently supported only for GameeWebApp** as a way to\n         * have alternate keybinding. The game should request a type used\n         * for mobile platform and then some other as *additionalController*\n         * if alternate keybinding is needed;\n         */\n        // TODO remove this function\n        additionalController: function (type, opts) {\n            var controller = createController(type, opts);\n            gameeNative.additionalController(type);\n\n            return controller;\n        },\n\n        /** ### trigger\n         *\n         * Triggers and event for the controller\n         *\n         * This is called by GameeApp to trigger the *keydown*, *keyup*\n         * events. For more info see [Controller](#controller)\n         *\n         * @param {String} eventName name of the event\n         * @param {*} [data,...] data to pass for the event\n         *\n         */\n        trigger: function () {\n            var i;\n\n            if (this.mainController) {\n                this.mainController.trigger.apply(this.mainController, arguments);\n            } else {\n                throw new Error('No controller present');\n            }\n        }\n    };\n\n    /** ### core._keydown\n     *\n     * A helper function to listen for `keydown` events on window object.\n     *\n     * @param {Function} fn callback to handle the event\n     */\n    core._keydown = function (fn) {\n        global.addEventListener('keydown', wrapKeyEvent(fn));\n    };\n\n    /** ### core._keyup\n     *\n     * A helper function to listen for `keyup` events on window object.\n     *\n     * @param {Function} fn callback to handle the event\n     */\n    core._keyup = function (fn) {\n        global.addEventListener('keyup', wrapKeyEvent(fn));\n    };\n\n    /** ### createController\n     *\n     * Function to create a controller.\n     *\n     * *see [requestController](#requestcontroller)\n     *\n     * @param {String} type\n     * @param {Object} [opts]\n     * @returns {Controller} controller\n     */\n    function createController(type, opts) {\n        var btn, controller;\n\n        if (!controllerTypes[type]) {\n            throw new Error('Unsupported controller type, ' + type);\n        }\n\n        opts = opts || {};\n\n        controller = new controllerTypes[type]();\n\n        if (opts.enableKeyboard) {\n            controller.enableKeyboard(core);\n        }\n\n        if (opts.buttons) {\n            for (btn in opts.buttons) {\n                controller.remapButton(btn, opts.buttons[btn]);\n            }\n        }\n\n        return controller;\n    }\n\n\n\n    /** ### controllerTypes\n     *\n     * List of controller types and their coresponding classes.\n     *\n     * *see [Controllers](#controllers) for more info*\n     * @requires Controller\n     */\n    var controllerTypes = {\n        'OneButton': controllers.OneButtonController,\n        'TwoButtons': controllers.TwoButtonController,\n        'FourButtons': controllers.FourButtonController,\n        'FiveButtons': controllers.FiveButtonController,\n        'SixButtons': controllers.SixButtonController,\n        'FourArrows': controllers.FourArrowController,\n        'Touch': controllers.TouchController,\n        'Joystick': controllers.JoystickController,\n        'JoystickWithButton': controllers.JoystickButtonController,\n        'TwoArrowsTwoButtons': controllers.TwoArrowsTwoButtonsController,\n        'TwoArrowsOneButton': controllers.TwoArrowsOneButtonController,\n        'TwoActionButtons': controllers.TwoActionButtonsController\n    };\n\n\n    core.registerPlatform = function (platformAPI) {\n        // platformAPI.addEventListener()\n        // TODO ?\n    };\n\n    /**\n     * Is true mute all console outputs\n     * @return {boolean}\n     */\n    core.isSilentModeEnabled = function () {\n        return cache.silentMode;\n    };\n\n    return core;\n})();\n\nexport var DataTypeException = function (expected, present, argument, method) {\n    this.expected = expected;\n    this.present = present;\n    this.method = method;\n    this.argument = argument;\n    this.message = `Invalid data type in method ${this.method}, argument ${this.argument} is expected to be ${this.expected}, but found ${this.present}`;\n};\n\nexport var validateDataType = function (testedInput, expectedType, argument, originMethod) {\n    switch (expectedType) {\n\n        case \"array\":\n            if (!Array.isArray(testedInput))\n                throw new DataTypeException(expectedType, typeof testedInput, argument, originMethod);\n            break;\n\n        default:\n            if (typeof testedInput !== expectedType)\n                throw new DataTypeException(expectedType, typeof testedInput, argument, originMethod);\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./gamee/src/core.js","import { core } from \"./core.js\"\nimport { CustomEmitter } from \"../libs/shims.js\"\nimport { validateDataType } from \"./core.js\"\n\n/**\n * gameeAPI module desc\n * @module gameeAPI\n */\n\n/**\n * Emit events\n * @class GameeEmitter\n * @extends CustomEmitter\n */\nexport var GameeEmitter = function () {\n    CustomEmitter.call(this);\n};\n\n/**\n * @class Gamee\n * @requires core\n *\n */\nexport var Gamee = function (platform) {\n    /**\n     * @instance\n     *\n     * @fires gameeAPI:GameeEmitter~start\n     * @fires gameeAPI:GameeEmitter~mute\n     * @fires gameeAPI:GameeEmitter~unmute\n     * @fires gameeAPI:GameeEmitter~pause\n     * @fires gameeAPI:GameeEmitter~unpause\n     * @fires gameeAPI:GameeEmitter~ghostHide\n     * @fires gameeAPI:GameeEmitter~ghostShow\n     */\n    this.emitter = new GameeEmitter();\n    this._platform = platform;\n};\n\nGamee.prototype = (function () {\n\n    var cbError = function (err) {\n        if (err) {\n            throw \"Error \" + err.toString();\n        }\n    };\n\n    return {\n        _controller: core.controller,\n        /**\n         * gameInit\n         * @memberof Gamee\n         * @param {string} controllType\n         * @param {object} controllOpts\n         * @param {string[]} capabilities\n         * @param {gameInitCallback} cb\n         * @param {boolean} silentMode\n         */\n        gameInit: function (controllType, controllOpts, capabilities, cb, silentMode = false) {\n            validateDataType(controllType, \"string\", \"controllType\", \"gamee.updateScore\");\n            validateDataType(controllOpts, \"object\", \"controllOpts\", \"gamee.gameInit\");\n            validateDataType(capabilities, \"array\", \"capabilities\", \"gamee.gameInit\");\n            validateDataType(cb, \"function\", \"cb\", \"gamee.gameInit\");\n            validateDataType(silentMode, \"boolean\", \"silentMode\", \"gamee.gameInit\");\n            var result = core.gameeInit(controllType, controllOpts, capabilities, cb, silentMode);\n            // cb(null, result);\n        },\n\n        /**\n         * gameLoadingProgress\n         *\n         *     gamee.gameLoadingProgress()\n         *\n         * @memberof Gamee\n         * @param {number} percentage current loading progress\n         * @param {Gamee~voidCallback} [opt_cb]\n         *\n         */\n        gameLoadingProgress: function (percentage, opt_cb) {\n            validateDataType(percentage, \"number\", \"percentage\", \"gamee.gameLoadingProgress\");\n            opt_cb = opt_cb || cbError;\n            validateDataType(opt_cb, \"function\", \"opt_cb\", \"gamee.gameLoadingProgress\");\n            core.gameLoadingProgress(percentage);\n            opt_cb(null);\n        },\n\n        /**\n         * gameReady\n         *\n         * @memberof Gamee\n         * @param {Gamee~voidCallback} [opt_cb]\n         */\n        gameReady: function (opt_cb) {\n            opt_cb = opt_cb || cbError;\n            validateDataType(opt_cb, \"function\", \"opt_cb\", \"gamee.gameReady\");\n            core.gameReady();\n            opt_cb(null);\n        },\n\n        /**\n         * gameSave\n         *\n         * NOTE: There are 2 signatures for this function\n         *\n         *     gamee.gameSave(data, opt_cb)\n         *     gamee.gameSave(data, opt_share, opt_cb)\n         *\n         * @memberof Gamee\n         * @param {String} data current ingame progress\n         * @param {Boolean} [opt_share=false]\n         * @param {Gamee~voidCallback} [opt_cb]\n         *\n         */\n        gameSave: function (data, opt_share, opt_cb) {\n            var share = false, cb;\n            validateDataType(data, \"string\", \"data\", \"gamee.gameSave\");\n            if (typeof opt_share === 'function')\n                opt_cb = opt_share;\n            else if (typeof opt_share !== \"undefined\")\n                validateDataType(opt_share, \"boolean\", \"opt_share\", \"gamee.gameSave\");\n\n            opt_cb = opt_cb || cbError;\n            validateDataType(opt_cb, \"function\", \"opt_cb\", \"gamee.gameSave\");\n            core.gameSave(data, share);\n            opt_cb(null);\n        },\n\n        /**\n         * getPlatform\n         *\n         * @memberof Gamee\n         * @returns {string} platform type can be android | ios | web | fb\n         */\n        getPlatform: function () {\n            return this._platform;\n        },\n\n        /**\n         * updateScore\n         *\n         * @memberof Gamee\n         * @param {number} score\n         * @param {boolean} [opt_ghostSign=false] If true, score will be updated for ghost instead.\n         * @param {Gamee~voidCallback} [opt_cb]\n         */\n        updateScore: function (score, opt_ghostSign, opt_cb) {\n            validateDataType(score, \"number\", \"score\", \"gamee.updateScore\");\n            if (typeof opt_ghostSign === \"function\")\n                opt_cb = opt_ghostSign;\n            else if (typeof opt_ghostSign !== \"undefined\")\n                validateDataType(opt_ghostSign, \"boolean\", \"opt_ghostSign\", \"gamee.updateScore\");\n\n            opt_cb = opt_cb || cbError;\n            validateDataType(opt_cb, \"function\", \"opt_cb\", \"gamee.updateScore\");\n            core.updateScore(score, opt_ghostSign);\n            opt_cb(null);\n        },\n\n        /**\n         * gameOver\n         *\n         * @memberof Gamee\n         * @param {Gamee~ReplayData} [opt_replayData]\n         * @param {Gamee~voidCallback} [opt_cb]\n         * @param {Gamee~object} [opt_saveState]\n         * @param {Gamee~boolean} [opt_hideOverlay]\n         */\n        gameOver: function (opt_replayData, opt_cb, opt_saveState, opt_hideOverlay) {\n            if (typeof opt_replayData === \"function\")\n                opt_cb = opt_replayData;\n            else if (typeof opt_replayData !== \"undefined\")\n                validateDataType(opt_replayData, \"object\", \"opt_replayData\", \"gamee.gameOver\");\n\n            if (typeof opt_hideOverlay !== 'undefined') {\n                validateDataType(opt_hideOverlay, \"boolean\", \"opt_hideOverlay\", \"gamee.gameOver\");\n            }\n\n            opt_cb = opt_cb || cbError;\n            validateDataType(opt_cb, \"function\", \"opt_cb\", \"gamee.gameOver\");\n            core.gameOver(opt_replayData, opt_saveState, opt_hideOverlay);\n            opt_cb(null);\n        },\n\n        /**\n         * requestSocialData\n         *\n         * @memberof Gamee\n         * @param {Gamee~requestSocialDataCallback} cb\n         * @param {number} numberOfPlayers\n         */\n        requestSocial: function (cb, numberOfPlayers) {\n            validateDataType(cb, \"function\", \"cb\", \"gamee.requestSocial\");\n\n            // functionality supposed to be removed once we do update for iOS\n            var data = core.requestSocial(function (error, responseData) {\n                var modifiedResponse = !responseData.hasOwnProperty(\"socialData\") ? { socialData: responseData } : responseData;\n                cb(null, modifiedResponse);\n            }, numberOfPlayers);\n\n            // var data = core.requestSocial(cb);\n            //cb(null, data);\n        },\n\n         /**\n         * logEvent\n         *\n         * @memberof Gamee\n         * @param {string} eventName\n         * @param {string} eventValue\n         */\n        logEvent: function (eventName, eventValue) {\n\n            validateDataType(eventName,\"string\",\"eventName\",\"gamee.logEvent\");\n\n            if(!eventName || eventName.length > 24){\n                console.error(\"eventName parameter cant be null and can only contain up to 24 characters\");\n                return\n            }\n\n            validateDataType(eventValue,\"string\",\"eventValue\",\"gamee.logEvent\");\n\n            if(!eventValue || eventValue.length > 160){\n                console.error(\"eventValue parameter cant be null and can only contain up to 160 characters\");\n                return\n            }\n\n            core.logEvent(eventName,eventValue);\n        },\n\n        /**\n         * requestBattleData\n         *\n         * @memberof Gamee\n         * @param {Gamee~requestBattleDataDataCallback} cb\n         */\n        requestBattleData: function (cb) {\n            validateDataType(cb, \"function\", \"cb\", \"gamee.requestBattleData\");\n\n            core.requestBattleData(cb);\n        },\n\n        /**\n         * requestPlayerReplay\n         *\n         * @memberof Gamee\n         * @param {number} userID\n         * @param {Gamee~requestPlayerReplayDataCallback} cb\n         */\n        requestPlayerReplay: function (userID, cb) {\n\n            validateDataType(userID, \"number\", \"userID\", \"gamee.requestPlayerReplay\");\n            validateDataType(cb, \"function\", \"cb\", \"gamee.requestPlayerReplay\");\n\n            core.requestPlayerReplay(userID, cb);\n        },\n\n        /**\n         * requestPlayerSaveState\n         *\n         * @memberof Gamee\n         * @param {number} userID\n         * @param {Gamee~requestPlayerSaveStateDataCallback} cb\n         */\n        requestPlayerSaveState: function (userID, cb) {\n\n            validateDataType(userID, \"number\", \"userID\", \"gamee.requestPlayerSaveState\");\n            validateDataType(cb, \"function\", \"cb\", \"gamee.requestPlayerSaveState\");\n\n            core.requestPlayerSaveState(userID, cb);\n        },\n\n        /*\n         * playerEnteredToGameRoom\n         * @member of Gamee\n         */\n        playerEnteredToGameRoom: function () {\n            core.playerEnteredToGameRoom()\n        },\n\n        /*\n         * playerLeftGameRoom\n         * @member of Gamee\n         */\n        playerLeftGameRoom: function () {\n            core.playerLeftGameRoom()\n        },\n\n        /*\n        *purchaseItem\n        *@member of Gamee\n        *@param {object} purchaseDetails\n        *@param {Gamee~purchaseItemDataCallback} cb\n        */\n        purchaseItem: function (purchaseDetails,cb){\n\n            validateDataType(purchaseDetails,\"object\",\"purchaseDetails\",\"gamee.purchaseItem\");\n            validateDataType(cb,\"function\",\"cb\",\"gamee.purchaseItem\");\n\n            core.purchaseItemWithCoins(purchaseDetails, cb, true)\n        },\n\n        /*\n        *purchaseItemWithCoins\n        *@member of Gamee\n        *@param {object} purchaseDetails\n        *@param {Gamee~purchaseItemDataCallback} cb\n        */\n        purchaseItemWithCoins: function (purchaseDetails, cb) {\n            validateDataType(purchaseDetails,\"object\",\"purchaseDetails\",\"gamee.purchaseItemWithCoins\");\n            validateDataType(cb,\"function\",\"cb\",\"gamee.purchaseItemWithCoins\");\n\n            core.purchaseItemWithCoins(purchaseDetails, cb)\n        },\n\n        /*\n        *purchaseItemWithGems\n        *@member of Gamee\n        *@param {object} purchaseDetails\n        *@param {Gamee~purchaseItemWithGemsDataCallback} cb\n        */\n        purchaseItemWithGems: function (purchaseDetails,cb) {\n\n            validateDataType(purchaseDetails,\"object\",\"purchaseDetails\",\"gamee.purchaseItemWithGems\");\n            validateDataType(cb,\"function\",\"cb\",\"gamee.purchaseItemWithGems\");\n\n            core.purchaseItemWithGems(purchaseDetails,cb)\n        },\n\n        /*share\n        *@member of Gamee\n        *@param {object} shareDetails\n        *@param {Gamee~shareDataCallback} cb\n        */\n        share: function (shareDetails,cb){\n            validateDataType(shareDetails,\"object\",\"shareDetails\",\"gamee.share\");\n            validateDataType(cb,\"function\",\"cb\",\"gamee.share\");\n\n            core.share(shareDetails,cb)\n        },\n\n        /*\n        *loadRewardedVideo\n        *@member of Gamee\n        *@param {Gamee~loadRewardedVideo} cb\n        */\n        loadRewardedVideo: function (cb){\n\n            validateDataType(cb,\"function\",\"cb\",\"gamee.loadRewardedVideo\");\n            core.loadRewardedVideo(cb)\n        },\n\n        /*\n        *showRewardedVideo\n        *@member of Gamee\n        *@param{Gamee~showRewardedVideo} cb\n        */\n        showRewardedVideo: function (cb){\n\n            validateDataType(cb,\"function\",\"cb\",\"gamee.showRewardedVideo\");\n            core.showRewardedVideo(cb)\n        },\n\n\n        /*\n         * showSubscribeDialog\n         * @member of Gamee\n         * @param{Gamee~showSubscribeDialog} cb\n         */\n        showSubscribeDialog: function (cb){\n            validateDataType(cb,\"function\",\"cb\",\"gamee.showSubscribeDialog\");\n            core.showSubscribeDialog(cb)\n        },\n\n        /**\n        *requestPlayerData\n        *@member of Gamee\n        *@param{Gamee~requestPlayerData} cb\n        * @param {number} userID\n        */\n        requestPlayerData: function (cb, userID){\n\n            validateDataType(cb,\"function\",\"cb\",\"gamee.requestPlayerData\");\n            if (userID !== undefined) {\n                validateDataType(userID,\"number\",\"userId\",\"gamee.requestPlayerData\");\n            }\n            core.requestPlayerData(cb, userID)\n        },\n    };\n\n    /**\n     *\n     * @typedef ReplayData\n     * @param {string} variant\n     * @param {string} data\n     */\n\n    /**\n     * This callback is displayed as part of the Requester class.\n     * @callback Gamee~voidCallback\n     * @param {string} responseCode\n     */\n\n    /**\n     * This callback is displayed as part of the Requester class.\n     * @callback Gamee~gameInitCallback\n     * @param {object} data\n     * @param {string} responseCode\n     */\n\n    /**\n     * This callback is displayed as part of the Requester class.\n     * @callback Gamee~requestSocialDataCallback\n     * @param {object} data\n     * @param {string} responseCode\n     */\n\n})();\n\n/**\n * Signals that game should start as normal|replay|ghost game.\n * Signal means there is no overlay over the game.\n * This signal is also being used for game restart. If previous\n * instance of the game was running, it should be terminated without\n * any additional calls and current progress should be tossed.\n * @event gameeAPI:GameeEmitter~start\n * @type {object}\n * @property {EventDetailStart} detail - Common property of events\n */\n\n/**\n * Data carried with start event.\n * @typedef EventDetailStart\n * @property {Gamee~voidCallback} callback - called after finishing task\n * @property {boolean} [opt_resetState=false] - if true, game must delete current progress and saved progress\n * @property {boolean} [opt_replay] - if true, game must run in replay mode\n * @property {boolean} [opt_ghostMode] - if true, game must run in ghost mode\n */\n\n/**\n * After that signal, game must silent all sounds immediately.\n * Game must remain silent until unmute signal occures.\n * @event gameeAPI:GameeEmitter~mute\n * @type {object}\n * @property {EventDetailVoid} detail - Common property of events\n */\n\n/**\n * After unmute signal, game can play sounds again.\n * @event gameeAPI:GameeEmitter~unmute\n * @type {object}\n * @property {EventDetailVoid} detail - Common property of events\n */\n\n/**\n * Pause signal means there appeared overlay over the game. Player\n * is unable to reach the context of the game anymore. So game should\n * pause all its acctions immediately.\n * @event gameeAPI:GameeEmitter~pause\n * @type {object}\n * @property {EventDetailVoid} detail - Common property of events\n */\n\n/**\n * Unpause signal means there is no overlay over the game anymore.\n * Game should continue with all previous actions.\n * @event gameeAPI:GameeEmitter~unpause\n * @type {object}\n * @property {EventDetailVoid} detail - Common property of events\n */\n\n/**\n * Signal ghostHide can appear only if game is running in ghost mode.\n * Game should hide ghost behavior and look like exactly as game without\n * the ghost (if this is possible).\n * @event gameeAPI:GameeEmitter~ghostHide\n * @type {object}\n * @property {EventDetailVoid} detail - Common property of events\n */\n\n/**\n * Signal ghostShow can appear only if game is running in ghost mode.\n * Game should show ghost again if it was hidden. If ghost died or ended\n * while it was hidden, game should point that out, so the player can understand\n * why the ghost is not visible anymore.\n * @event gameeAPI:GameeEmitter~ghostShow\n * @type {object}\n * @property {EventDetailVoid} detail - Common property of events\n */\n\n/**\n * Data carried with various events. Contains only callback method.\n * @typedef {object} EventDetailVoid\n * @property {Gamee~voidCallback} callback - call after finishing task\n */\n\n/**\n * @type {function}\n * @param {MyEvent} e - The observable event.\n * @listens gameeAPI:GameeEmitter~event:snowball\n */\n\n\n\n// WEBPACK FOOTER //\n// ./gamee/src/gameeAPI.js","import { core } from \"./core.js\"\n\n/**\n *\n * @requires core\n *\n * @typedef PlatformAPI\n * @param {EventTarget} emitter\n * @param {function} _pause\n * @param {function} _resume\n * @param {function} _ghostShow\n * @param {function} _ghostHide\n * @param {function} _mute\n * @param {function} _unmute\n * @param {function} _start\n */\nexport var PlatformAPI = {\n\temitter: null,\n\tpause: function (cb) {\n\t\tvar event = new CustomEvent('pause', {\n\t\t\tdetail: {\n\t\t\t\tcallback: cb\n\t\t\t}\n\t\t});\n\t\tthis.emitter.dispatchEvent(event);\n\t},\n\tresume: function (cb) {\n\t\tvar event = new CustomEvent('resume', {\n\t\t\tdetail: {\n\t\t\t\tcallback: cb\n\t\t\t}\n\t\t});\n\t\tthis.emitter.dispatchEvent(event);\n\t},\n\tghostShow: function (cb) {\n\t\tvar event = new CustomEvent('ghostShow', {\n\t\t\tdetail: {\n\t\t\t\tcallback: cb\n\t\t\t}\n\t\t});\n\t\tthis.emitter.dispatchEvent(event);\n\t},\n\tghostHide: function (cb) {\n\t\tvar event = new CustomEvent('ghostHide', {\n\t\t\tdetail: {\n\t\t\t\tcallback: cb\n\t\t\t}\n\t\t});\n\t\tthis.emitter.dispatchEvent(event);\n\t},\n\tmute: function (cb) {\n\t\tvar event = new CustomEvent('mute', {\n\t\t\tdetail: {\n\t\t\t\tcallback: cb\n\t\t\t}\n\t\t});\n\t\tthis.emitter.dispatchEvent(event);\n\t},\n\tunmute: function (cb) {\n\t\tvar event = new CustomEvent('unmute', {\n\t\t\tdetail: {\n\t\t\t\tcallback: cb\n\t\t\t}\n\t\t});\n\t\tthis.emitter.dispatchEvent(event);\n\t},\n\tstart: function (data, cb) {\n\t\tvar event = new CustomEvent('start', {\n\t\t\tdetail: {\n\t\t\t\tcallback: cb\n\t\t\t}\n\t\t});\n\n\t\tvar error = core.startSignal(data);\n\t\tif (error) {\n\t\t\tcb(error);\n\t\t\treturn;\n\t\t}\n\n\t\tif (data.replay)\n\t\t\tevent.detail.opt_replay = true;\n\t\tif (data.ghostMode)\n\t\t\tevent.detail.opt_ghostMode = true;\n\t\tif (data.resetState)\n\t\t\tevent.detail.opt_resetState = true;\n        if (data.replayData){\n            event.detail.replayData = data.replayData\n        }\n\n\t\tthis.emitter.dispatchEvent(event);\n\t}\n};\n\n\n/**\n * @class PlatformBridge\n *\n */\nexport function PlatformBridge() {\n\tthis.requests = {};\n\tthis.platform = \"\";\n\tthis._init();\n}\n\nPlatformBridge.prototype = {\n\tinstCount: 0,\n\t_init: function () {\n\t},\n\tcreateRequest: function (method, opt_requestData, opt_callback) {\n\t\tif (!this.validateMethod(method))\n\t\t\treturn;\n\t\tif (typeof opt_requestData === 'function') {\n\t\t\topt_callback = opt_requestData;\n\t\t\topt_requestData = undefined;\n\t\t}\n\n\t\tvar messId = this.instCount++;\n\n\t\tif (typeof opt_callback !== 'undefined') {\n\t\t\tthis.requests[messId] = opt_callback;\n\t\t}\n\n\t\tvar preparedObject = {\n\t\t\trequest: {\n\t\t\t\tmethod: method,\n\t\t\t\tmessageId: messId,\n\t\t\t\tdata: null\n\t\t\t}\n\t\t};\n\n\t\tthis.doCall(preparedObject, opt_requestData);\n\t},\n\tvalidateMethod: function (method) {\n\t\treturn method === \"gameLoadingProgress\" ? false : true;\n\t},\n\t/**\n\t * @abstract\n\t */\n\tdoCall: function (preparedObject, requestData) {\n\t\tthrow \"Not implemented\";\n\t},\n\t_callback: function (id, responseData) {\n\t\tvar cb = this.requests[id];\n\t\tdelete this.requests[id];\n\t\tif (cb)\n\t\t\tcb(responseData);\n\t},\n\t/**\n\t * @abstract\n\t */\n\tdoResponse: function (preparedObject, responseData) {\n\t\tthrow \"Not implemented\";\n\t},\n};\n\n\n/**\n * @class PostMessageBridge\n * @requires PlatformBridge\n */\nexport function PostMessageBridge(endpoint) {\n\tthis._gameeWin = endpoint;\n\tPlatformBridge.call(this);\n\tthis.platform = \"web\";\n}\n\nPostMessageBridge.prototype = Object.create(PlatformBridge.prototype);\nPostMessageBridge.prototype.constructor = PostMessageBridge;\n\nPostMessageBridge.prototype._init = function () {\n\n\twindow.addEventListener('message', function (ev) {\n\t\t// if(ev.origin === \"source we want\")\n\t\t// console.log(\"_triggerMessage detail: \" + ev.detail);\n\t\t// console.log(\"_triggerMessage data: \" + ev.data);\n\t\tvar data;\n\t\tif (typeof ev.detail === \"object\" && typeof ev.detail !== null) {\n\t\t\tdata = ev.detail;\n\t\t} else if (typeof ev.data === \"object\") {\n\t\t\tdata = ev.data;\n\t\t} else {\n\t\t\t// message is not from native platform\n\t\t\treturn;\n\t\t}\n\n        if (!core.isSilentModeEnabled()) {\n            console.log(JSON.stringify(data, null, 4) + ' data');\n        }\n\t\t// this is request\n\t\tif (data.request && data.request.method && typeof data.request.messageId !== \"undefined\") {\n\t\t\tthis._resolveAPICall(data.request.method, data.request.messageId, data.request.data);\n\t\t}\n\t\t// this is reponse\n\t\telse if (data.response && typeof data.response.messageId !== \"undefined\") {\n\t\t\tif (data.error)\n\t\t\t\tthrow data.error;\n\t\t\tthis._callback(data.response.messageId, data.response.data);\n\t\t}\n\t\t// else this message target is not this framework\n\t}.bind(this), false);\n};\n\n\nPostMessageBridge.prototype.doCall = function (preparedObject, requestData) {\n\tif (typeof requestData === \"object\") {\n\t\tpreparedObject.request.data = requestData || {};\n\t}\n\tthis._gameeWin.postMessage(preparedObject, \"*\");\n};\n\nPostMessageBridge.prototype.doResponse = function (messageId, responseData) {\n\tvar preparedObject = {\n\t\tversion: this.version,\n\t\tresponse: {\n\t\t\tmessageId: messageId\n\t\t}\n\t};\n\n\tif (responseData)\n\t\tpreparedObject.data = responseData;\n\n\tthis._gameeWin.postMessage(preparedObject, \"*\");\n};\n\nPostMessageBridge.prototype._resolveAPICall = function (method, messageId, opt_data) {\n\tvar cb = this.doResponse.bind(this, messageId);\n\n\tswitch (method) {\n\t\tcase \"pause\":\n\t\t\tPlatformAPI.pause(cb);\n\t\t\tbreak;\n\t\tcase \"resume\":\n\t\t\tPlatformAPI.resume(cb);\n\t\t\tbreak;\n\t\tcase \"mute\":\n\t\t\tPlatformAPI.mute(cb);\n\t\t\tbreak;\n\t\tcase \"unmute\":\n\t\t\tPlatformAPI.unmute(cb);\n\t\t\tbreak;\n\t\tcase \"ghostShow\":\n\t\t\tPlatformAPI.ghostShow(cb);\n\t\t\tbreak;\n\t\tcase \"ghostHide\":\n\t\t\tPlatformAPI.ghostHide(cb);\n\t\t\tbreak;\n\t\tcase \"start\":\n\t\t\tif (!opt_data) {\n\t\t\t\tthrow \"Method _start missing params\";\n\t\t\t}\n\t\t\tPlatformAPI.start(opt_data, cb);\n\t\t\tbreak;\n\t\tdefault:\n\t\t    if (!core.isSilentModeEnabled()) {\n\t\t\t    console.error(\"Unknown method call\");\n            }\n\t}\n};\n\n\n/**\n * @class MobileBridge\n * @requires PlatformBridge\n *\n */\nexport function MobileBridge(device) {\n\tthis.device = device;\n\tPostMessageBridge.call(this);\n\tthis.platform = \"mobile\";\n}\n\nMobileBridge.prototype = Object.create(PostMessageBridge.prototype);\nMobileBridge.prototype.constructor = MobileBridge;\n\nMobileBridge.prototype._init = function () {\n\tPostMessageBridge.prototype._init.call(this);\n\tif (this.device === \"ios\") {\n\t\tthis._gameeWin = webkit.messageHandlers.callbackHandler;\n\t} else if (this.device === \"android\") {\n\t\tthis._gameeWin = _toDevice;\n\t} else {\n\t\tthrow \"Unknown device used in webkit bridge\";\n\t}\n\n\twindow._triggerMessage = function (data) {\n\t\ttry {\n\t\t\tdata = JSON.parse(data); // message is custom message from IOS/android platform\n\t\t} catch (err) {\n\t\t\tthrow \"Couldn't parse message from native app: \\n\" + data + \"\\n\" + err;\n\t\t}\n\t\tif (!core.isSilentModeEnabled()) {\n            console.log(JSON.stringify(data, null, 4));\n        }\n\t\tthis.dispatchEvent(new CustomEvent(\"message\", { detail: data }));\n\t}.bind(window);\n\n};\n\nMobileBridge.prototype.doCall = function (preparedObject, requestData) {\n\tif (typeof requestData === \"object\") {\n\t\tpreparedObject.request.data = requestData || {};\n\t}\n\n\tif (this.device === \"android\") // stringify data for android devices, but not for ios\n\t\tpreparedObject = JSON.stringify(preparedObject);\n\n\tthis._gameeWin.postMessage(preparedObject, \"*\");\n};\n\n\n\n// WEBPACK FOOTER //\n// ./gamee/src/platform_bridge.js","\nvar BulletClass = function () {\n    var _self = this,\n        _events = {};\n\n    _self.on = function (event, fn, once) {\n        if (arguments.length < 2 ||\n            typeof event !== \"string\" ||\n            typeof fn !== \"function\") return;\n\n        var fnString = fn.toString();\n\n        // if the named event object already exists in the dictionary...\n        if (typeof _events[event] !== \"undefined\") {\n            // add a callback object to the named event object if one doesn't already exist.\n            if (typeof _events[event].callbacks[fnString] === \"undefined\") {\n                _events[event].callbacks[fnString] = {\n                    cb: fn,\n                    once: !!once\n                };\n            }\n            else if (typeof once === \"boolean\") {\n                // the function already exists, so update it's 'once' value.\n                _events[event].callbacks[fnString].once = once;\n            }\n        }\n        else {\n            // create a new event object in the dictionary with the specified name and callback.\n            _events[event] = {\n                callbacks: {}\n            };\n\n            _events[event].callbacks[fnString] = { cb: fn, once: !!once };\n        }\n    };\n\n    _self.once = function (event, fn) {\n        _self.on(event, fn, true);\n    };\n\n    _self.off = function (event, fn) {\n        if (typeof event !== \"string\" ||\n            typeof _events[event] === \"undefined\") return;\n\n        // remove just the function, if passed as a parameter and in the dictionary.\n        if (typeof fn === \"function\") {\n            var fnString = fn.toString(),\n                fnToRemove = _events[event].callbacks[fnString];\n\n            if (typeof fnToRemove !== \"undefined\") {\n                // delete the callback object from the dictionary.\n                delete _events[event].callbacks[fnString];\n            }\n        }\n        else {\n            // delete all functions in the dictionary that are\n            // registered to this event by deleting the named event object.\n            delete _events[event];\n        }\n    };\n\n    _self.trigger = function (event, data) {\n        if (typeof event !== \"string\" ||\n            typeof _events[event] === \"undefined\") return;\n\n        for (var fnString in _events[event].callbacks) {\n            var callbackObject = _events[event].callbacks[fnString];\n\n            if (typeof callbackObject.cb === \"function\") callbackObject.cb(data);\n            if (typeof callbackObject.once === \"boolean\" && callbackObject.once === true) _self.off(event, callbackObject.cb);\n        }\n    };\n\n};\n\n\nexport var Bullet = new BulletClass();\n\n\n// WEBPACK FOOTER //\n// ./gamee/libs/bullet.js","import { Bullet } from \"../libs/bullet.js\"\n\n/**\n * @module game_controllers\n */\n\n/** ## Bullet\n *\n * [Bullet.js](https://github.com/munkychop/bullet) is used as pub/sub\n * library.\n *\n * The controller and its buttons are instance of Bullet.\n */\nexport var BulletClass = Bullet.constructor;\n\n\n/** ## Button\n *\n * Represenation of a controller button. It is a child of\n * [Bullet](https://github.com/munkychop/bullet), so you can\n * subscribe for events triggered on it.\n *\n * @class Button\n * @param {String} key name of the button\n * @param {Number} keyCode keycode for the key to represent the button\n * on keyboard\n */\nexport function Button(key, keyCode) {\n\tvar self = this;\n\n\tBulletClass.call(this);\n\n\tthis._pressed = true;\n\n\tthis.key = key;\n\tthis.keyCode = keyCode;\n\n\tthis.on('keydown', function () {\n\t\tself._pressed = true;\n\t});\n\n\tthis.on('keyup', function () {\n\t\tself._pressed = false;\n\t});\n}\n\nButton.prototype = Object.create(BulletClass.constructor.prototype);\nButton.constructor = Button;\n\n/** ### isDown\n *\n * Ask if the button is currently pressed.\n *\n * @return {Boolean} true if the button is currently pressed\n */\nButton.prototype.isDown = function () {\n\treturn this._pressed;\n};\n\n/** ## Controller\n *\n * Controller has a collection of [buttons](#buttons).\n * It is a child of\n * [Bullet](https://github.com/munkychop/bullet), so you can\n * subscribe for events triggered on it.\n *\n * Controllers will get all the events for its buttons so you can\n * listen for them globaly from controller or individualy on every\n * button.\n *\n * ```javascript\n * controller.on('keydown', function(data) {\n *   console.log('button ' + data.button + ' is pressed');\n * });\n *\n * controller.buttons.left.on('keydown', function() {\n *   console.log('button left is pressed');\n * });\n * ```\n *\n * @class Controller\n */\nexport function Controller() {\n\tvar self = this;\n\n\tBulletClass.call(this);\n\n\t// ### buttons\n\t//\n\t// Map of controller's [buttons](#button) by their name.\n\t//\n\t// ```javascript\n\t// controller.buttons.left // Button('left', ..)\n\t// ```\n\tthis.buttons = {};\n\n\t// ### buttonAlias\n\t//\n\t// Map of remapped buttons.\n\t//\n\t// *see [remapButton](#remapbutton) for more info*\n\t//\n\tthis.buttonAlias = {};\n\n\t// Events prefixed with *$* are private, sent from GameeApp ment\n\t// to be handled before resended as *public (non-prefixed)*\n\t// event.\n\t//\n\t// They should be not used in games as they can change in the future.\n\tthis.on('$keydown', function (data) {\n\t\tif (data.button && self.buttonAlias[data.button]) {\n\t\t\tdata.button = self.buttonAlias[data.button];\n\t\t}\n\n\t\tself.trigger('keydown', data);\n\t});\n\n\tthis.on('$keyup', function (data) {\n\t\tif (data.button && self.buttonAlias[data.button]) {\n\t\t\tdata.button = self.buttonAlias[data.button];\n\t\t}\n\n\t\tself.trigger('keyup', data);\n\t});\n\n\t// By default GameeApp will trigger *keydown* and *keyup* events for\n\t// the controller for every button presses/released.\n\t//\n\t// The controller then handles the event and triggers the event for\n\t// the coresponding button.\n\t//\n\t// It expexts a `data` argument which should have a property `button`\n\t// with the name of button.\n\tthis.on('keydown', function (data) {\n\t\tif (!data.button || !self.buttons[data.button]) {\n\t\t\treturn;\n\t\t}\n\n\t\tself.buttons[data.button].trigger('keydown');\n\t});\n\n\tthis.on('keyup', function (data) {\n\t\tif (!data.button || !self.buttons[data.button]) {\n\t\t\treturn;\n\t\t}\n\n\t\tself.buttons[data.button].trigger('keyup');\n\t});\n}\n\nController.prototype = Object.create(BulletClass.constructor.prototype);\nController.constructor = Controller;\n\n/** ### addButton\n *\n * Add button to the controller.\n *\n * @param {Button} button a [Button](#button) instance\n */\nController.prototype.addButton = function (button) {\n\tthis.buttons[button.key] = button;\n};\n\n/** ### enableKeyboard\n *\n * Enable keyboard controlls. It will attach event listeners to the\n * *window* object for every button and trigger their *keydown* /\n * *keyup* event for the controller.\n */\nController.prototype.enableKeyboard = function (gamee) {\n\tvar key, button, keyCodes = {}, self = this;\n\n\tfor (key in this.buttons) {\n\t\tbutton = this.buttons[key];\n\n\t\tif (button.keyCode) {\n\t\t\tkeyCodes[button.keyCode] = button;\n\t\t}\n\t}\n\n\tgamee._keydown(function (ev) {\n\t\tvar button = keyCodes[ev.keyCode];\n\n\t\tif (!button) {\n\t\t\treturn;\n\t\t}\n\n\t\tev.preventDefault();\n\t\tself.trigger('keydown', { button: button.key });\n\t});\n\n\tgamee._keyup(function (ev) {\n\t\tvar button = keyCodes[ev.keyCode];\n\n\t\tif (!button) {\n\t\t\treturn;\n\t\t}\n\n\t\tev.preventDefault();\n\t\tself.trigger('keyup', { button: button.key });\n\t});\n};\n\n/** ### remapButton\n *\n * Remap the names of the controller's buttons. Controllers have their\n * button names set (left, right, A, B), but sometimes in context of\n * the game a different names are desired.\n *\n * ```javascript\n * var controller = gamee.controller.requestController('TwoButtons');\n * controller.remapButton('left', 'throttle');\n * controller.remapButton('right', 'break');\n *\n * controller.buttons.throttle.on('keydown', ..);\n * ```\n *\n * @param {String} oldName button name we want to change\n * @param {String} newName new button name\n */\nController.prototype.remapButton = function (oldName, newName) {\n\n\t// handle old code\n\tif (newName.name) {\n\t\tnewName = newName.name;\n\t}\n\n\tif (this.buttons[oldName]) {\n\t\tthis.buttonAlias[oldName] = newName.name;\n\n\t\tthis.buttons[newName.name] = this.buttons[oldName];\n\n\t\tdelete this.buttons[oldName];\n\t} else {\n\t\tthrow Error('Button ' + oldName + ' was not found in controller');\n\t}\n};\n\n// ## Controllers\n\n/** ### OneButtonController\n *\n * Controller with only one button.\n * @class OneButtonController\n */\nexport function OneButtonController() {\n\tController.call(this);\n\n\t// * __name__: 'button'\n\t// * __key__: spacebar\n\tthis.addButton(new Button('button', 32));\n}\nOneButtonController.prototype = Object.create(Controller.prototype);\nOneButtonController.prototype.constructor = OneButtonController;\n\n\n/** ### TwoButtonController\n *\n * Controller with two buttons\n * @class TwoButtonController\n */\nexport function TwoButtonController() {\n\tController.call(this);\n\n\t// * __name__: 'left'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('left', 37));\n\n\t// * __name__: 'right'\n\t// * __key__: righ arrow\n\tthis.addButton(new Button('right', 39));\n}\nTwoButtonController.prototype = Object.create(Controller.prototype);\nTwoButtonController.prototype.constructor = TwoButtonController;\n\n\n/** ### TwoActionButtonsController\n *\n * Controller with two action buttons (A,B)\n * @class TwoActionButtonsController\n */\nexport function TwoActionButtonsController() {\n\tController.call(this);\n\n\t// * __name__: 'left'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('A', 32));\n\n\t// * __name__: 'right'\n\t// * __key__: righ arrow\n\tthis.addButton(new Button('B', 17));\n}\nTwoActionButtonsController.prototype = Object.create(Controller.prototype);\nTwoActionButtonsController.prototype.constructor = TwoActionButtonsController;\n\n\n/** ### FourButtonController\n *\n * Controller with four buttons\n * @class FourButtonController\n */\nexport function FourButtonController() {\n\tController.call(this);\n\n\t// * __name__: 'up'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('up', 38));\n\n\t// * __name__: 'left'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('left', 37));\n\n\n\t// * __name__: 'right'\n\t// * __key__: righ arrow\n\tthis.addButton(new Button('right', 39));\n\n\t// * __name__: 'A'\n\t// * __key__: spacebar\n\tthis.addButton(new Button('A', 32));\n}\nFourButtonController.prototype = Object.create(Controller.prototype);\nFourButtonController.prototype.constructor = FourButtonController;\n\n/** ### FiveButtonController\n *\n * Controller with five buttons\n * @class FiveButtonController\n */\nexport function FiveButtonController() {\n\tController.call(this);\n\n\t// * __name__: 'up'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('up', 38));\n\n\t// * __name__: 'left'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('left', 37));\n\n\n\t// * __name__: 'right'\n\t// * __key__: righ arrow\n\tthis.addButton(new Button('right', 39));\n\n\t// * __name__: 'down'\n\t// * __key__: down arrow\n\tthis.addButton(new Button('down', 40));\n\n\t// * __name__: 'A'\n\t// * __key__: spacebar\n\tthis.addButton(new Button('A', 32));\n}\nFiveButtonController.prototype = Object.create(Controller.prototype);\nFiveButtonController.prototype.constructor = FiveButtonController;\n\n/** ### SixButtonController\n *\n * Controller with six buttons\n * @class SixButtonController\n */\nexport function SixButtonController() {\n\tController.call(this);\n\n\t// * __name__: 'up'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('up', 38));\n\n\t// * __name__: 'left'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('left', 37));\n\n\n\t// * __name__: 'right'\n\t// * __key__: righ arrow\n\tthis.addButton(new Button('right', 39));\n\n\t// * __name__: 'down'\n\t// * __key__: down arrow\n\tthis.addButton(new Button('down', 40));\n\n\t// * __name__: 'A'\n\t// * __key__: spacebar\n\tthis.addButton(new Button('A', 32));\n\n\t// * __name__: 'B'\n\t// * __key__: ctrl\n\tthis.addButton(new Button('B', 17));\n}\nSixButtonController.prototype = Object.create(Controller.prototype);\nSixButtonController.prototype.constructor = SixButtonController;\n\n/** ### TwoArrowsOneButtonController\n *\n * Controller with two arrows and one action button\n * @class TwoArrowsOneButtonController\n */\nexport function TwoArrowsOneButtonController() {\n\tController.call(this);\n\n\n\t// * __name__: 'left'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('left', 37));\n\n\n\t// * __name__: 'right'\n\t// * __key__: righ arrow\n\tthis.addButton(new Button('right', 39));\n\n\n\t// * __name__: 'A'\n\t// * __key__: spacebar\n\tthis.addButton(new Button('A', 32));\n\n}\nTwoArrowsOneButtonController.prototype = Object.create(Controller.prototype);\nTwoArrowsOneButtonController.prototype.constructor = TwoArrowsOneButtonController;\n\n/** ### TwoArrowsTwoButtonsController\n *\n * Controller with two arrows and two action buttons\n * @class TwoArrowsTwoButtonsController\n */\nexport function TwoArrowsTwoButtonsController() {\n\tController.call(this);\n\n\n\t// * __name__: 'left'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('left', 37));\n\n\n\t// * __name__: 'right'\n\t// * __key__: righ arrow\n\tthis.addButton(new Button('right', 39));\n\n\n\t// * __name__: 'A'\n\t// * __key__: spacebar\n\tthis.addButton(new Button('A', 32));\n\n\t// * __name__: 'B'\n\t// * __key__: ctrl\n\tthis.addButton(new Button('B', 17));\n\n}\nTwoArrowsTwoButtonsController.prototype = Object.create(Controller.prototype);\nTwoArrowsTwoButtonsController.prototype.constructor = TwoArrowsTwoButtonsController;\n\n/** ### FourArrowController\n *\n * Controller with four arrow buttons\n * @class FourArrowController\n */\nexport function FourArrowController() {\n\tController.call(this);\n\n\t// * __name__: 'up'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('up', 38));\n\n\t// * __name__: 'left'\n\t// * __key__: left arrow\n\tthis.addButton(new Button('left', 37));\n\n\n\t// * __name__: 'right'\n\t// * __key__: righ arrow\n\tthis.addButton(new Button('right', 39));\n\n\t// * __name__: 'down'\n\t// * __key__: down arrow\n\tthis.addButton(new Button('down', 40));\n}\nFourArrowController.prototype = Object.create(Controller.prototype);\nFourArrowController.prototype.constructor = FourArrowController;\n\n/** ### TouchController\n *\n * This controller has no buttons. Instead it has a touchpad which\n * triggers *touchstart*, *touchend*, *touchmove*, *touchcancel*,\n * *touchend* events (similar to\n * [Touch event types](https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent#Touch_event_types))\n *\n * The position of the touch is in the `data.position` argument as a\n * *x* and *y* with the values between [0, 0] for the left top corner\n * and [1, 1] for the bottom right corner ([0.5, 0.5] is the center).\n *\n * ```javascript\n * controller = gamee.controller.requestController('Touch');\n *\n * controller.on('touchstart', function(data) {\n *\tif (data.position.x < 0.5 && data.position.y < 0.5) {\n *    console.log('touch in the top left quadrant');\n *  }\n * })\n * ```\n * @class TouchController\n */\nexport function TouchController() {\n\tvar self = this;\n\n\tController.call(this);\n\n\tthis.on(\"$touchstart\", function (data) {\n\t\tself.trigger('touchstart', data);\n\t});\n\n\tthis.on(\"$touchend\", function (data) {\n\t\tself.trigger('touchend', data);\n\t});\n\n\tthis.on(\"$touchmove\", function (data) {\n\t\tself.trigger('touchmove', data);\n\t});\n\n\tthis.on(\"$touchleave\", function (data) {\n\t\tself.trigger('touchleave', data);\n\t});\n\n\tthis.on(\"$touchcancel\", function (data) {\n\t\tself.trigger('touchcancel', data);\n\t});\n}\nTouchController.prototype = Object.create(TouchController.prototype);\nTouchController.prototype.constructor = TouchController;\n\n/** ### JoystickController\n *\n * JoystickController emits `change` event, after the position of the\n * joystick is changed.\n *\n * The position of the joystick is in the property `x` and `y`. The\n * position on axis is between <-1, 1> (for x -1 is max left\n * position, 1 max right position). [0.0, 0.0] is the center.\n *\n * ```javascript\n * joystick = gamee.controller.requestController('Joystick');\n *\n * joystick.on('change', function() {\n *   new_x = joystick.x;\n *   nex_y = joystick.y;\n * })\n * ```\n * @class JoystickController\n */\nexport function JoystickController() {\n\tvar self = this;\n\n\tController.call(this);\n\n\t// x axis\n\tthis.x = 0;\n\t// y axis\n\tthis.y = 0;\n\n\tthis.on(\"$change\", function (data) {\n\t\tself.x = data.position.x;\n\t\tself.y = data.position.y;\n\n\t\tself.trigger(\"change\", data);\n\t});\n}\nJoystickController.prototype = Object.create(Controller.prototype);\nJoystickController.prototype.constructor = JoystickController;\n\n/** ### JoystickButtonController\n *\n * JoystickButtonController is a `JoystickController` with one button.\n *\n * ```javascript\n * joystick = gamee.controller.requestController('JoystickWithButton');\n *\n * joystick.on('change', function() {\n *   new_x = joystick.x;\n *   nex_y = joystick.y;\n * })\n *\n * joystick.buttons.button.on('keydown', callback)\n * // or simply\n * joystick.on('keydown', callback)\n * ```\n * @class JoystickButtonController\n */\nexport function JoystickButtonController() {\n\tvar self = this;\n\n\tJoystickController.call(this);\n\n\t// * __name__: 'button'\n\t// * __key__: spacebar\n\tthis.addButton(new Button('button', 32));\n}\nJoystickButtonController.prototype = Object.create(JoystickController.prototype);\nJoystickButtonController.prototype.constructor = JoystickButtonController;\n\n\n\n// WEBPACK FOOTER //\n// ./gamee/src/game_controllers.js","import { } from \"../libs/shims.js\"\nimport { Gamee } from \"./gameeAPI.js\"\nimport { core } from \"./core.js\"\nimport { PlatformAPI, PlatformBridge, PostMessageBridge, MobileBridge } from \"./platform_bridge.js\"\n\n\n/**\n * Instance of gamee object with API for developers.\n * Internal functions becomes private this way\n *\n * @requires Gamee\n */\nexport var gamee;\n\n/**\n * Resolves what platform is being used and make instance of platform API.\n *\n * @requires PlatformBridge\n */\nvar platformBridge = (function () {\n\n    var platformBridge, platformType = \"web\";\n\n    // Reslove Gamee enviroment\n    /* current user agent */\n    var userAgent = navigator.userAgent.toLowerCase();\n\n    if (/iphone|ipod|ipad/.test(userAgent)) { // test ios device\n        // user agent is use to determine current enviroment\n\n        // Test if window with game have a parent (loading in iframe)\n        if (window.self !== window.top) {\n            platformType = \"web\";\n        } else {\n            platformType = \"ios\";\n        }\n    } else if (/gamee\\/[0-9\\.]+$/.test(userAgent)) { // test android app\n        // TODO do you really test android like that?\n        platformType = \"android\";\n    } else if (window.parent) { // TODO doesnt make sence, parent always exists!!\n        platformType = \"web\";\n    } else if (window.parent && window.parent.gameeSimulator) { // TODO doesnt make sence, parent always exist?\n        platformType = \"web\";\n    }\n\n    gamee = new Gamee(platformType);\n\n    window.gamee = gamee;\n\n    switch (platformType) {\n        case \"web\":\n            if (window.parent === window) {\n                console.error(\"Gamee must run in iframe on web platform\");\n            }\n            platformBridge = new PostMessageBridge(window.parent);\n            break;\n        case \"ios\":\n            platformBridge = new MobileBridge(\"ios\");\n            break;\n        case \"android\":\n            platformBridge = new MobileBridge(\"android\");\n            break;\n        default:\n            throw \"Can't identify the platform\";\n    }\n    return platformBridge;\n})();\n\ncore.PlatformAPI = PlatformAPI;\ncore.native = platformBridge;\n\nPlatformAPI.emitter = gamee.emitter;\n\n\nfunction loadScript (url, callback) {\n    // Adding the script tag to the head as suggested before\n    var head = document.getElementsByTagName('head')[0];\n    var script = document.createElement('script');\n    script.src = url;\n\n    // Then bind the event to the callback function.\n    // There are several events for cross browser compatibility.\n    script.onreadystatechange = callback;\n    script.onload = callback;\n\n    // Fire the loading\n    head.appendChild(script);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./gamee/src/index.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 7\n// module chunks = 0 1"],"sourceRoot":""}