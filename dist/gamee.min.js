!function(a){"use strict";function b(a){a.updateScore=function(a){window.location.href="gamee://score/"+a},a.requestController=function(a){window.location.href="gamee://request-controller/"+a},a.gameOver=function(){window.location.href="gamee://game-over"},a.gameStart=function(){e(function(){window.location.href="gamee://game-start"},100)},a.gameLoaded=function(){window.location.href="gamee://game-loaded"},a.type="gamee-mobile"}function c(a){var b=window.parent.gameeSimulator;a.updateScore=function(a){b.updateScore(a)},a.requestController=function(a){b.requestController(a)},a.gameOver=function(){b.gameOver()},a.gameStart=function(){b.gameStart()},a.gameLoaded=function(){b.gameLoaded()},a.type="gamee-simulator"}function d(a){var b=window.parent;a.updateScore=function(a){b.postMessage(["score",a],"*")},a.requestController=function(a){b.postMessage(["request-controller",a],"*")},a.additionalController=function(a){b.postMessage(["additional-controller",a],"*")},a.gameOver=function(){b.postMessage(["game-over"],"*")},a.gameStart=function(){b.postMessage(["game-start"],"*")},a.gamePaused=function(){b.postMessage(["game-paused"],"*")},a.gameLoaded=function(){b.postMessage(["game-loaded"],"*")},a.type="gamee-web"}var e=a.setTimeout,f={updateScore:function(a){},requestController:function(a){},additionalController:function(a){},gameOver:function(){},gameStart:function(){},gameLoaded:function(){},type:"no-gamee"},g=navigator.userAgent.toLowerCase();/iphone|ipod|ipad/.test(g)?window.self!==window.top?d(f):b(f):/gamee\/[0-9\.]+$/.test(g)?b(f):window.parent?d(f):window.parent&&window.parent.gameeSimulator?c(f):console.error("No gamee enviroment matched"),a.$gameeNative=f}(this);var gamee=function(a){"use strict";function b(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function c(a){return function(b){return b&&b.keyCode||(b||(b=window.event),b.which&&(b.keyCode=b.which)),a(b)}}var d,e=function(){},f={};return Object.defineProperty(f,"score",{get:function(){return d},set:function(b){d=b,a.$gameeNative.updateScore(d)}}),f.gameOver=function(){a.$gameeNative.gameOver()},f.gameStart=function(){a.$gameeNative.gameStart()},f.gameLoaded=function(){a.$gameeNative.gameLoaded()},f.onPause=e,f.onStop=e,f.onRestart=e,f.onMute=e,f.onUnmute=e,f.onUnpause=e,f.onResume=function(){f.onUnpause()},f._keydown=function(d){b(a,"keydown",c(d))},f._keyup=function(d){b(a,"keyup",c(d))},"gamee-web"===a.$gameeNative.type&&(f._keydown(function(a){switch(a.keyCode){case 80:f.onPause(),$gameeNative.gamePaused();break;case 82:f.onRestart()}}),b(a,"message",function(a){switch(a.data[0]){case"pause":f.onPause();break;case"resume":f.onResume();break;case"restart":window.focus(),f.onRestart();break;case"mute":f.onMute();break;case"button_button_down":f.controller.trigger("keydown",{button:"button"});break;case"button_button_up":f.controller.trigger("keyup",{button:"button"});break;case"button_left_up":f.controller.trigger("keyup",{button:"left"});break;case"button_left_down":f.controller.trigger("keydown",{button:"left"});break;case"button_right_down":f.controller.trigger("keydown",{button:"right"});break;case"button_right_up":f.controller.trigger("keyup",{button:"right"});break;case"button_up_down":f.controller.trigger("keydown",{button:"up"});break;case"button_up_up":f.controller.trigger("keyup",{button:"up"});break;case"button_down_down":f.controller.trigger("keydown",{button:"down"});break;case"button_down_up":f.controller.trigger("keyup",{button:"down"});break;case"button_a_down":f.controller.trigger("keydown",{button:"A"});break;case"button_a_up":f.controller.trigger("keyup",{button:"A"});break;case"button_b_down":f.controller.trigger("keydown",{button:"B"});break;case"button_b_up":f.controller.trigger("keyup",{button:"B"});break;default:console.error("Unknown message")}})),f}(this);!function(a,b){"use strict";function c(a,b){var c=this;o.call(this),this._pressed=!0,this.key=a,this.keyCode=b,this.on("keydown",function(){c._pressed=!0}),this.on("keyup",function(){c._pressed=!1})}function d(){var a=this;o.call(this),this.buttons={},this.buttonAlias={},this.on("$keydown",function(b){b.button&&a.buttonAlias[b.button]&&(b.button=a.buttonAlias[b.button]),a.trigger("keydown",b)}),this.on("$keyup",function(b){b.button&&a.buttonAlias[b.button]&&(b.button=a.buttonAlias[b.button]),a.trigger("keyup",b)}),this.on("keydown",function(b){b.button&&a.buttons[b.button]&&a.buttons[b.button].trigger("keydown")}),this.on("keyup",function(b){b.button&&a.buttons[b.button]&&a.buttons[b.button].trigger("keyup")})}function e(){d.call(this),this.addButton(new c("button",32))}function f(){d.call(this),this.addButton(new c("left",37)),this.addButton(new c("right",39))}function g(){d.call(this),this.addButton(new c("up",38)),this.addButton(new c("left",37)),this.addButton(new c("right",39)),this.addButton(new c("A",32))}function h(){d.call(this),this.addButton(new c("up",38)),this.addButton(new c("left",37)),this.addButton(new c("right",39)),this.addButton(new c("down",40)),this.addButton(new c("A",32))}function i(){d.call(this),this.addButton(new c("up",38)),this.addButton(new c("left",37)),this.addButton(new c("right",39)),this.addButton(new c("down",40)),this.addButton(new c("A",32)),this.addButton(new c("B",17))}function j(){d.call(this),this.addButton(new c("up",38)),this.addButton(new c("left",37)),this.addButton(new c("right",39)),this.addButton(new c("down",40))}function k(){var a=this;d.call(this),this.on("$touchstart",function(b){a.trigger("touchstart",b)}),this.on("$touchend",function(b){a.trigger("touchend",b)}),this.on("$touchmove",function(b){a.trigger("touchmove",b)}),this.on("$touchleave",function(b){a.trigger("touchleave",b)}),this.on("$touchcancel",function(b){a.trigger("touchcancel",b)})}function l(){var a=this;d.call(this),this.x=0,this.y=0,this.on("$change",function(b){a.x=b.position.x,a.y=b.position.y,a.trigger("change",b)})}function m(){l.call(this),this.addButton(new c("button",32))}function n(a,b){var c,d;if(!q[a])throw new Error("Unsupported controller type, "+a);if(b=b||{},d=new q[a],b.enableKeyboard&&d.enableKeyboard(),b.buttons)for(c in b.buttons)d.remapButton(c,b.buttons[c]);return d}var o=Bullet.constructor;b.controller={requestController:function(b,c){var d=n(b,c);return a.$gameeNative.requestController(b),p=d,d},additionalController:function(b,c){var d=n(b,c);return a.$gameeNative.additionalController(b),d},trigger:function(){if(!p)throw new Error("No controller present");p.trigger.apply(p,arguments)}},c.prototype=Object.create(o.constructor.prototype),c.constructor=c,c.prototype.isDown=function(){return this._pressed},d.prototype=Object.create(o.constructor.prototype),d.constructor=d,d.prototype.addButton=function(a){this.buttons[a.key]=a},d.prototype.enableKeyboard=function(){var a,c,d={},e=this;for(a in this.buttons)c=this.buttons[a],c.keyCode&&(d[c.keyCode]=c);b._keydown(function(a){var b=d[a.keyCode];b&&(a.preventDefault(),e.trigger("keydown",{button:b.key}))}),b._keyup(function(a){var b=d[a.keyCode];b&&(a.preventDefault(),e.trigger("keyup",{button:b.key}))})},d.prototype.remapButton=function(a,b){if(b.name&&(b=b.name),!this.buttons[a])throw Error("Button "+a+" was not found in controller");this.buttonAlias[a]=b.name,this.buttons[b.name]=this.buttons[a],delete this.buttons[a]},e.prototype=Object.create(d.prototype),e.prototype.constructor=e,f.prototype=Object.create(d.prototype),f.prototype.constructor=f,g.prototype=Object.create(d.prototype),g.prototype.constructor=g,h.prototype=Object.create(d.prototype),h.prototype.constructor=h,i.prototype=Object.create(d.prototype),i.prototype.constructor=i,j.prototype=Object.create(d.prototype),j.prototype.constructor=j,k.prototype=Object.create(k.prototype),k.prototype.constructor=k,l.prototype=Object.create(d.prototype),l.prototype.constructor=l,m.prototype=Object.create(l.prototype),m.prototype.constructor=m;var p,q={OneButton:e,TwoButtons:f,FourButtons:g,FiveButtons:h,SixButtons:i,FourArrows:j,Touch:k,Joystick:l,JoystickWithButton:m}}(this,gamee);